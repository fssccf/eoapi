!function(t){function e(s){if(o[s])return o[s].exports;var n=o[s]={i:s,l:!1,exports:{}};return t[s].call(n.exports,n,n.exports,e),n.l=!0,n.exports}var o={};e.m=t,e.c=o,e.d=function(t,o,s){e.o(t,o)||Object.defineProperty(t,o,{configurable:!1,enumerable:!0,get:s})},e.n=function(t){var o=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(o,"a",o),o},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=12)}({12:function(t,e,o){"use strict";$(function(){function t(){window.sessionStorage.clear(),clearInterval(c.fun.interval);try{c.port.auto&&c.port.auto.disconnect(),c.port.batch&&c.port.batch.disconnect(),c.port.autoCode&&c.port.autoCode.disconnect(),c.port.normal&&c.port.normal.disconnect()}catch(t){console.log(t)}}function e(){var t=c.CONSTANT.location.href,e=/\/api\/test/i,s=/apistore\.eolinker\.com/i,u=/proInside\/api\/case/i,d=/home\/project.*\/test\/api|home\/project\/proInside\/test\/admin\/api/i,l=/home\/project.+\/test\/mode\/advanced|home\/project\/proInside\/test\/admin\/mode\/advanced/i,g=/home\/project.+\/test\/admin\/\?|home\/project\/inside\/test\/default\?/i,m=/home\/project\/proInside\/test\/admin\/mode\/env/i,f=e.test(t),h=s.test(t),T=u.test(t),y=d.test(t),C=l.test(t),N=g.test(t),S=m.test(t);h||(f||T||y||C||N||S)&&(c.product.productType=o(),c.product.hasConsole||(c.product.hasConsole=!0,console.log("%c   welcome,eolinker_extension","font-size:14px;color:#4caf50;font-weight:bold;background:url('https://www.eolinker.com/assets/images/favicon.ico') no-repeat;background-size:14px;background-position:top left;")),f?n():T?a():y?r():C||S?i():N&&p())}function o(){var t=!1;try{t=$('meta[name="product-type"]')[0].content,c.product.productVersion=$('meta[name="version"]')[0].content||"349"}catch(t){}if(t)return 2==t&&(c.product.oldDeployVersion=!1),t;return c.CONSTANT.location.host.indexOf("eolinker.com")>-1?(c.product.oldDeployVersion=!0,1):2}function s(){var t=[],e={},o=[],s=null,n=null,a=null,r=0,i=0;if(t=c.CONSTANT.location.href,t.indexOf("?")>-1)for(o=t.split("?"),o=o[1].split("&"),i=o.length,r=0;r<i;r++)s=o[r].split("="),n=decodeURIComponent(s[0]),a=decodeURIComponent(s[1]),n.length>0&&(e[n]=a);return e}function n(){t(),s();var e=!1;$(document).off("click"),$(document).on("click",".send-btn",function(){if(e)e=!1,c.port.normal.postMessage({stopStatus:!0});else{c.port.normal=chrome.runtime.connect({name:"normalTest"}),e=!0;var t=window.sessionStorage.getItem("plug-normalTest-info")||$("#plug-in-js").text();t=JSON.parse(t);for(var o=t.requestInfo.params,s=!1,n=0;n<o.length;n++)if(1==o[n].paramType){s=!0;break}t.flagFile=s,c.port.normal.postMessage(t),c.port.normal.onMessage.addListener(function(t,o,s){if(e){var n=$("#plug-in-result-js");"210000"==t.statusCode&&console.log("请求发送失败，请正确填写接口信息"),window.sessionStorage.setItem("plug-background-result",t.backResult),0==c.product.productType?n.text(t.backResult):n.text(1),e=!1}})}})}function a(){function e(){var t=$("#plug-batch-in-js").text();try{t=JSON.parse(t)}catch(t){}t.env&&($(document).on("click",".batch-test-btn",function(){var t=$(".batch-test-btn"),e=t.index($(this)),s=$("#plug-batch-in-result-js");if("true"==$(this).attr("testing")){c.port.batch=chrome.runtime.connect({name:"batchTest"});var n=JSON.parse($("#plug-batch-in-js").text()),a={};0==e?a=n:(a.caseList=[n.caseList[e-1]],a.env=n.env),a.index=e,a.amount=n.caseList.length,a.productType=c.product.productType,a.oldDeployVersion=c.product.oldDeployVersion,c.port.batch.postMessage(a),c.port.batch.onMessage.addListener(function(t){for(a=0;a<n.caseList.length;a++)null!=t.responseList[a]||(t.responseList[a]=null);if(0==e){for(var a=t.responseList.length-1;a>=0;a--)null==t.responseList[a]&&(t.status="testing");2==c.product.productType&&c.product.oldDeployVersion?(o=t,s.text(JSON.stringify(o))):(window.sessionStorage.setItem("plug-background-result",JSON.stringify(t)),o={responseList:[],status:t.status},s.text(JSON.stringify(o))),o={responseList:[],status:"tested"}}else{o.responseList[e-1]=t.responseList[e-1];for(var a=t.responseList.length-1;a>=0;a--)o.responseList[a]||(o.responseList[a]=null);2==c.product.productType&&c.product.oldDeployVersion?s.text(JSON.stringify(o)):(window.sessionStorage.setItem("plug-background-result",JSON.stringify(t)),o={responseList:[],status:t.status},s.text(JSON.stringify(o)))}})}else c.port.batch.postMessage({index:e,stopStatus:!0})}),window.clearInterval(c.fun.interval))}t();var o={responseList:[],status:"tested"};$(document).off("click"),c.fun.interval=setInterval(e,100)}function r(){function e(){$.ajax({url:n+a,method:"POST",contentType:"application/x-www-form-urlencoded;charset=UTF-8",data:{companyHashKey:i.companyHashKey,projectHashKey:i.projectHashKey,caseID:i.caseID}}).done(function(t,e,o){try{p=JSON.parse(t)}catch(t){}}).fail(function(t,e){})}t();var o={responseList:[],status:"tested"},n=c.CONSTANT.location.origin+c.CONSTANT.location.pathname,a="apiManagementPro/AutomatedTestCaseSingle/getSingleCaseList",r="apiManagementPro/AutomatedTestHistory/addTestLog",i=s(),p={},u=0,d=!1;0==c.product.productType?(n=c.CONSTANT.location.origin+c.CONSTANT.location.pathname.replace(/index\.php$/i,""),a="server/index.php?g=Web&c=AutomatedTestCaseSingle&o=getSingleTestCaseList"):1==c.product.productType?c.CONSTANT.location.hash.indexOf("proInside")>-1?a="apiManagementPro/AutomatedTestCaseSingle/getSingleCaseList":(a="apiManagement/AutomatedTestCaseSingle/getSingleCaseList",r="apiManagementPro/AutomatedTestHistory/addTestLog"):(n=c.CONSTANT.location.origin+c.CONSTANT.location.pathname.replace(/independent\/$/i,""),a="index.php/apiManagementPro/AutomatedTestCaseSingle/getSingleCaseList",r="index.php/apiManagementPro/AutomatedTestHistory/addTestLog"),e(),function(){function t(){var t=$("button.batch-test-btn");$("#automated-text").unbind("DOMCharacterDataModified"),$("#automated-text").bind("DOMCharacterDataModified",function(t){var o=JSON.parse($("#automated-text").text());u!=o.flag&&(e(),u=o.flag)}),void 0!=p&&void 0!=p.singCaseList&&p.singCaseList.length==t.length-1&&(clearInterval(c.fun.interval),$(".batch-test-btn").off("click"),$(".batch-test-btn").on("click",function(){var t=$(".batch-test-btn"),e=$("#plug-batch-in-result-js"),s=t.index($(this)),a={},u=JSON.parse($("#automated-text").text()).env;"true"==$(this).attr("testing")?(d=!1,c.port.auto=chrome.runtime.connect({name:"autoTest"}),a.caseData=0==s?p.singCaseList:[p.singCaseList[s-1]],a.productType=c.product.productType,a.productVersion=c.product.productVersion,a.beforeCase={beforeCaseList:p.beforeCaseList||!1,env:u},a.index=s,a.amount=p.singCaseList.length,a.oldDeployVersion=c.product.oldDeployVersion,a.env=u,c.port.auto.postMessage(a),c.port.auto.onMessage.addListener(function(t){for(a=0;a<p.singCaseList.length;a++)null!=t.responseList[a]||(t.responseList[a]=null);if(0==s){for(var a=0;a<t.responseList.length;a++)if(null==t.responseList[a])t.status="testing";else if(t.responseList[a].isStopTest){t.status="tested";break}2==c.product.productType&&c.product.oldDeployVersion?(o=t,e.text(JSON.stringify(o))):(window.sessionStorage.setItem("plug-background-result",JSON.stringify(t)),o={responseList:[],status:t.status},e.text(JSON.stringify(o))),o={responseList:[],status:"tested"}}else{o.responseList[s-1]=t.responseList[s-1];for(var a=t.responseList.length-1;a>=0;a--)o.responseList[a]||(o.responseList[a]=null);2==c.product.productType&&c.product.oldDeployVersion?e.text(JSON.stringify(o)):(window.sessionStorage.setItem("plug-background-result",JSON.stringify(t)),o={responseList:[],status:t.status},e.text(JSON.stringify(o)))}!d&&(1==c.product.productType||2==c.product.productType)&&c.CONSTANT.location.hash.indexOf("proInside")>-1&&"tested"==t.status&&$.ajax({url:n+r,method:"POST",contentType:"application/x-www-form-urlencoded;charset=UTF-8",data:{caseID:i.caseID,companyHashKey:i.companyHashKey,projectHashKey:i.projectHashKey,result:JSON.stringify(t)}}).done(function(t,e,o){}).fail(function(t,e){console.log("添加历史记录失败")})})):(d=!0,c.port.auto.postMessage({index:s,stopStatus:!0}))}))}c.fun.interval=setInterval(t,500)}()}function i(){t();var e={responseList:[],status:"tested"},o=c.CONSTANT.location.origin+c.CONSTANT.location.pathname,n="apiManagementPro/AutomatedTestHistory/addTestLog",a=s(),r=!1;0==c.product.productType?o=c.CONSTANT.location.origin+c.CONSTANT.location.pathname.replace(/index\.php$/i,""):1==c.product.productType?n=c.CONSTANT.location.hash.indexOf("proInside")>-1?"apiManagementPro/AutomatedTestHistory/addTestLog":"apiManagement/AutomatedTestHistory/addTestLog":(o=c.CONSTANT.location.origin+c.CONSTANT.location.pathname.replace(/independent\/$/i,""),n="index.php/apiManagementPro/AutomatedTestHistory/addTestLog"),function(){function t(){0!=$("button.batch-test-btn").length&&(clearInterval(c.fun.interval),$(".batch-test-btn").off("click"),$(".batch-test-btn").on("click",function(){r=!1;var t=window.sessionStorage.getItem("plug-autoTest-code"),s=($(".batch-test-btn"),{}),i=$("#plug-batch-in-result-js");t=JSON.parse(t),"true"==$(this).attr("testing")?(c.port.autoCode=chrome.runtime.connect({name:"autoCodeTest"}),s.caseCode=t.caseCode,s.beforeCase={beforeCaseList:t.beforeCaseList||!1,env:t.env},s.productType=c.product.productType,s.env=t.env,s.oldDeployVersion=c.product.oldDeployVersion,c.port.autoCode.postMessage(s),c.port.autoCode.onMessage.addListener(function(t){window.sessionStorage.setItem("plug-background-result",JSON.stringify(t)),e={status:"tested"},i.text(JSON.stringify(e)),!r&&(1==c.product.productType||2==c.product.productType)&&c.CONSTANT.location.hash.indexOf("proInside")>-1&&$.ajax({url:o+n,method:"POST",contentType:"application/x-www-form-urlencoded;charset=UTF-8",data:{caseID:a.caseID,companyHashKey:a.companyHashKey,projectHashKey:a.projectHashKey,result:JSON.stringify(t)}}).done(function(t,e,o){}).fail(function(t,e){console.log("添加历史记录失败")})})):(r=!0,c.port.autoCode.postMessage({stopStatus:!0}))}))}c.fun.interval=setInterval(t,500)}()}function p(){function e(){p=null;var t={companyHashKey:i.companyHashKey,projectHashKey:i.projectHashKey,projectID:i.projectID,groupID:-1};t.groupID=void 0!=i.childGroupID?i.childGroupID:void 0==i.groupID?0:-1==i.groupID?0:i.groupID,$.ajax({url:n+a,method:"POST",contentType:"application/x-www-form-urlencoded;charset=UTF-8",data:t}).done(function(t,e,o){try{p=JSON.parse(t).caseList}catch(t){}}).fail(function(t,e){})}function o(){function t(){$(document).off("click");var t=$("button.batch-test-btn"),s=/home\/project\/inside\/test\/default\?/i,a=/home\/project\/proInside\/test\/admin\/\?groupID\=-2/i,d=a.test(c.CONSTANT.location.href);$("#automated-text").unbind("DOMCharacterDataModified"),$("#automated-text").bind("DOMCharacterDataModified",function(t){var s=JSON.parse($("#automated-text").text());u!=s.flag&&(e(),o(),u=s.flag)}),(null!=p&&p.length==t.length-1||s.test(c.CONSTANT.location.href)||d&&null!=p&&p.length==t.length)&&(clearInterval(c.fun.interval),$(".batch-test-btn").on("click",function(){function t(t){if(!m)if(0!=o||d)l.time=new Date-g.time.init+"ms",l.responseList=[t],l.status="tested","finish"==t.reportStatus||"finish"==t.status?l.successCase++:l.errorCase++,window.sessionStorage.setItem("plug-background-result",JSON.stringify(l)),s.status="tested",e.text(JSON.stringify(s));else{l.time=new Date-g.time.init+"ms",t.caseName=p[t.batchIndex].caseName,t.caseID=p[t.batchIndex].caseID,l.responseList[t.batchIndex]=t;var a=!0;for(u=0;u<p.length;u++)null!=l.responseList[u]||(l.responseList[u]=null);for(var u=0;u<l.responseList.length;u++)null==l.responseList[u]&&(a=!1);1==a&&(s.status="tested",l.status="tested"),"finish"==t.reportStatus||"finish"==t.status?l.successCase++:l.errorCase++,window.sessionStorage.setItem("plug-background-result",JSON.stringify(l)),e.text(JSON.stringify(s));var f=/home\/project\/inside\/test\/default\?/i;1!=a||1!=c.product.productType&&2!=c.product.productType||f.test(c.CONSTANT.location.href)||$.ajax({url:n+r,method:"POST",contentType:"application/x-www-form-urlencoded;charset=UTF-8",data:{companyHashKey:i.companyHashKey,projectHashKey:i.projectHashKey,result:JSON.stringify(l),groupID:void 0!=i.childGroupID?i.childGroupID:void 0==i.groupID?0:-1==i.groupID?0:i.groupID}}).done(function(t,e,o){}).fail(function(t,e){console.log("添加历史记录失败")})}}var e=$("#plug-batch-in-result-js");if("true"==$(this).attr("testing")){var o=$("button.batch-test-btn").index($(this));-1==o&&(o=0),m=!1,l={time:"0ms",totalCase:0,successCase:0,errorCase:0,responseList:[],status:"testing"};var s={responseList:[],status:"testing"},a=JSON.parse($("#automated-text").text()).env;l.totalCase=p.length,c.port.autoCode=chrome.runtime.connect({name:"autoCodeTest"}),c.port.auto=chrome.runtime.connect({name:"autoTest"}),l.responseList=new Array(l.totalCase),g.time.init=new Date;var u=[];d?(p[o].caseType=1,u.push(p[o])):0==o?u=p:u.push(p[o-1]);for(var f=0;f<u.length&&!m;f++)switch(u[f].caseType){case 1:var h={caseCode:u[f].caseCode,productType:c.product.productType,env:a,batchIndex:f,oldDeployVersion:c.product.oldDeployVersion,beforeCase:{beforeCaseList:u[f].beforeCaseList||!1,env:a}};c.port.autoCode.postMessage(h);break;case 0:var T={caseData:u[f].singleCaseList,productType:c.product.productType,index:0,batchIndex:f,amount:u[f].singleCaseList.length,oldDeployVersion:c.product.oldDeployVersion,env:a,beforeCase:{beforeCaseList:u[f].beforeCaseList||!1,env:a}};c.port.auto.postMessage(T)}c.port.autoCode.onMessage.addListener(t),c.port.auto.onMessage.addListener(t)}else m=!0,l.time=new Date-g.time.init+"ms",l.status="tested",window.sessionStorage.setItem("plug-background-result",JSON.stringify(l)),c.port.autoCode.postMessage({stopStatus:!0}),c.port.auto.postMessage({index:0,stopStatus:!0})}))}c.fun.interval=setInterval(t,500)}t();var n=c.CONSTANT.location.origin+c.CONSTANT.location.pathname,a="apiManagementPro/AutomatedTestCase/getTestCaseDataList",r="apiManagementPro/AutomatedTestHistory/addTestHistory",i=s(),p=null,u=0,d=/home\/project\/proInside\/test\/admin\/\?groupID\=-2/i;0==c.product.productType?(n=c.CONSTANT.location.origin+c.CONSTANT.location.pathname.replace(/index\.php$/i,""),a="server/index.php?g=Web&c=AutomatedTestCase&o=getTestCaseDataList"):1==c.product.productType?c.CONSTANT.location.hash.indexOf("proInside")>-1?(a=d.test(c.CONSTANT.location.href)?"apiManagementPro/AutomatedTestEnv/getTestCaseList":"apiManagementPro/AutomatedTestCase/getTestCaseDataList",r="apiManagementPro/AutomatedTestHistory/addTestHistory"):(a="apiManagement/AutomatedTestCase/getTestCaseDataList",r="apiManagement/AutomatedTestHistory/addTestHistory"):(n=c.CONSTANT.location.origin+c.CONSTANT.location.pathname.replace(/independent\/$/i,""),a=d.test(c.CONSTANT.location.href)?"index.php/apiManagementPro/AutomatedTestEnv/getTestCaseList":"index.php/apiManagementPro/AutomatedTestCase/getTestCaseDataList",r="index.php/apiManagementPro/AutomatedTestHistory/addTestHistory"),e();var l={time:"0ms",totalCase:0,successCase:0,errorCase:0,responseList:[],status:"testing"},g={time:{init:null}},m=!1;o()}var c={product:{oldDeployVersion:!1,productType:1,hasConsole:!1,productVersion:349},CONSTANT:{location:window.location},port:{batch:null,auto:null,autoCode:null,normal:null},fun:{interval:null}},u=document.getElementById("plug-inner-script"),d=!1;try{d="广州银云信息科技有限公司"==$('meta[name="author"]')[0].content}catch(t){}if(d)if(u)u.innerHTML="window.plug = {type: 'application/eolinker',version:207}";else{var l=document.createElement("script");l.innerHTML="window.plug = {type: 'application/eolinker',version:207}";var g=document.getElementsByTagName("script")[0];g.parentNode.insertBefore(l,g)}e(),window.onhashchange=e})}});