!function(e){function r(a){if(t[a])return t[a].exports;var o=t[a]={i:a,l:!1,exports:{}};return e[a].call(o.exports,o,o.exports,r),o.l=!0,o.exports}var t={};r.m=e,r.c=t,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:a})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},r.p="",r(r.s=7)}([function(module,__webpack_exports__,__webpack_require__){"use strict";Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),function(process,global,module){function handleFormJson(e){var r=null,t={status:0,errorText:""};try{r=transformJson()(e)}catch(e){console.log(e);var t={status:1,errorText:"form-data转json格式错误，请检查您填写的参数"}}return{dataParams:r,error:t}}function abortAll(e){$.each(e,function(e,r){r.abort()})}function getFile(e,r){function t(){o=this.response;var r={png:{name:"img_png.png"},jpg:{name:"img_jpg.jpg"},gif:{name:"img_gif.gif"},txt:{name:"file_txt.txt"},pdf:{name:"pdf.pdf"},doc:{name:"doc.doc"},docx:{name:"docx.docx"},none:{name:"file_none"}};return o.fileName=r[e].name,File[e]=o,o}var a=new XMLHttpRequest,o=new Blob;a.open("get",r,!0),a.onload=t,a.responseType="blob",a.send()}function MD5(e,r){function t(e,r){return e<<r|e>>>32-r}function a(e,r){var t,a,o,s,i;return o=2147483648&e,s=2147483648&r,t=1073741824&e,a=1073741824&r,i=(1073741823&e)+(1073741823&r),t&a?2147483648^i^o^s:t|a?1073741824&i?3221225472^i^o^s:1073741824^i^o^s:i^o^s}function o(e,r,t){return e&r|~e&t}function s(e,r,t){return e&t|r&~t}function i(e,r,t){return e^r^t}function n(e,r,t){return r^(e|~t)}function l(e,r,s,i,n,l,d){return e=a(e,a(a(o(r,s,i),n),d)),a(t(e,l),r)}function d(e,r,o,i,n,l,d){return e=a(e,a(a(s(r,o,i),n),d)),a(t(e,l),r)}function u(e,r,o,s,n,l,d){return e=a(e,a(a(i(r,o,s),n),d)),a(t(e,l),r)}function p(e,r,o,s,i,l,d){return e=a(e,a(a(n(r,o,s),i),d)),a(t(e,l),r)}function c(e){var r,t,a="",o="";for(t=0;t<=3;t++)r=e>>>8*t&255,o="0"+r.toString(16),a+=o.substr(o.length-2,2);return a}r||(r=32);var m,f,h,y,_,v,b,g,x,k=Array();for(k=function(e){for(var r,t=e.length,a=t+8,o=(a-a%64)/64,s=16*(o+1),i=Array(s-1),n=0,l=0;l<t;)r=(l-l%4)/4,n=l%4*8,i[r]=i[r]|e.charCodeAt(l)<<n,l++;return r=(l-l%4)/4,n=l%4*8,i[r]=i[r]|128<<n,i[s-2]=t<<3,i[s-1]=t>>>29,i}(e),v=1732584193,b=4023233417,g=2562383102,x=271733878,m=0;m<k.length;m+=16)f=v,h=b,y=g,_=x,v=l(v,b,g,x,k[m+0],7,3614090360),x=l(x,v,b,g,k[m+1],12,3905402710),g=l(g,x,v,b,k[m+2],17,606105819),b=l(b,g,x,v,k[m+3],22,3250441966),v=l(v,b,g,x,k[m+4],7,4118548399),x=l(x,v,b,g,k[m+5],12,1200080426),g=l(g,x,v,b,k[m+6],17,2821735955),b=l(b,g,x,v,k[m+7],22,4249261313),v=l(v,b,g,x,k[m+8],7,1770035416),x=l(x,v,b,g,k[m+9],12,2336552879),g=l(g,x,v,b,k[m+10],17,4294925233),b=l(b,g,x,v,k[m+11],22,2304563134),v=l(v,b,g,x,k[m+12],7,1804603682),x=l(x,v,b,g,k[m+13],12,4254626195),g=l(g,x,v,b,k[m+14],17,2792965006),b=l(b,g,x,v,k[m+15],22,1236535329),v=d(v,b,g,x,k[m+1],5,4129170786),x=d(x,v,b,g,k[m+6],9,3225465664),g=d(g,x,v,b,k[m+11],14,643717713),b=d(b,g,x,v,k[m+0],20,3921069994),v=d(v,b,g,x,k[m+5],5,3593408605),x=d(x,v,b,g,k[m+10],9,38016083),g=d(g,x,v,b,k[m+15],14,3634488961),b=d(b,g,x,v,k[m+4],20,3889429448),v=d(v,b,g,x,k[m+9],5,568446438),x=d(x,v,b,g,k[m+14],9,3275163606),g=d(g,x,v,b,k[m+3],14,4107603335),b=d(b,g,x,v,k[m+8],20,1163531501),v=d(v,b,g,x,k[m+13],5,2850285829),x=d(x,v,b,g,k[m+2],9,4243563512),g=d(g,x,v,b,k[m+7],14,1735328473),b=d(b,g,x,v,k[m+12],20,2368359562),v=u(v,b,g,x,k[m+5],4,4294588738),x=u(x,v,b,g,k[m+8],11,2272392833),g=u(g,x,v,b,k[m+11],16,1839030562),b=u(b,g,x,v,k[m+14],23,4259657740),v=u(v,b,g,x,k[m+1],4,2763975236),x=u(x,v,b,g,k[m+4],11,1272893353),g=u(g,x,v,b,k[m+7],16,4139469664),b=u(b,g,x,v,k[m+10],23,3200236656),v=u(v,b,g,x,k[m+13],4,681279174),x=u(x,v,b,g,k[m+0],11,3936430074),g=u(g,x,v,b,k[m+3],16,3572445317),b=u(b,g,x,v,k[m+6],23,76029189),v=u(v,b,g,x,k[m+9],4,3654602809),x=u(x,v,b,g,k[m+12],11,3873151461),g=u(g,x,v,b,k[m+15],16,530742520),b=u(b,g,x,v,k[m+2],23,3299628645),v=p(v,b,g,x,k[m+0],6,4096336452),x=p(x,v,b,g,k[m+7],10,1126891415),g=p(g,x,v,b,k[m+14],15,2878612391),b=p(b,g,x,v,k[m+5],21,4237533241),v=p(v,b,g,x,k[m+12],6,1700485571),x=p(x,v,b,g,k[m+3],10,2399980690),g=p(g,x,v,b,k[m+10],15,4293915773),b=p(b,g,x,v,k[m+1],21,2240044497),v=p(v,b,g,x,k[m+8],6,1873313359),x=p(x,v,b,g,k[m+15],10,4264355552),g=p(g,x,v,b,k[m+6],15,2734768916),b=p(b,g,x,v,k[m+13],21,1309151649),v=p(v,b,g,x,k[m+4],6,4149444226),x=p(x,v,b,g,k[m+11],10,3174756917),g=p(g,x,v,b,k[m+2],15,718787259),b=p(b,g,x,v,k[m+9],21,3951481745),v=a(v,f),b=a(b,h),g=a(g,y),x=a(x,_);return 32==r?c(v)+c(b)+c(g)+c(x):c(b)+c(g)}function SHA256(e){function r(e,r){var t=(65535&e)+(65535&r);return(e>>16)+(r>>16)+(t>>16)<<16|65535&t}function t(e,r){return e>>>r|e<<32-r}function a(e,r){return e>>>r}function o(e,r,t){return e&r^~e&t}function s(e,r,t){return e&r^e&t^r&t}function i(e){return t(e,2)^t(e,13)^t(e,22)}function n(e){return t(e,6)^t(e,11)^t(e,25)}function l(e){return t(e,7)^t(e,18)^a(e,3)}function d(e){return t(e,17)^t(e,19)^a(e,10)}var u=8,p=0;return e=function(e){e=e.replace(/\r\n/g,"\n");for(var r="",t=0;t<e.length;t++){var a=e.charCodeAt(t);a<128?r+=String.fromCharCode(a):a>127&&a<2048?(r+=String.fromCharCode(a>>6|192),r+=String.fromCharCode(63&a|128)):(r+=String.fromCharCode(a>>12|224),r+=String.fromCharCode(a>>6&63|128),r+=String.fromCharCode(63&a|128))}return r}(e),function(e){for(var r=p?"0123456789ABCDEF":"0123456789abcdef",t="",a=0;a<4*e.length;a++)t+=r.charAt(e[a>>2]>>8*(3-a%4)+4&15)+r.charAt(e[a>>2]>>8*(3-a%4)&15);return t}(function(e,t){var a,u,p,c,m,f,h,y,_,v,b,g,x=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),k=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),F=new Array(64);e[t>>5]|=128<<24-t%32,e[15+(t+64>>9<<4)]=t;for(var _=0;_<e.length;_+=16){a=k[0],u=k[1],p=k[2],c=k[3],m=k[4],f=k[5],h=k[6],y=k[7];for(var v=0;v<64;v++)F[v]=v<16?e[v+_]:r(r(r(d(F[v-2]),F[v-7]),l(F[v-15])),F[v-16]),b=r(r(r(r(y,n(m)),o(m,f,h)),x[v]),F[v]),g=r(i(a),s(a,u,p)),y=h,h=f,f=m,m=r(c,b),c=p,p=u,u=a,a=r(b,g);k[0]=r(a,k[0]),k[1]=r(u,k[1]),k[2]=r(p,k[2]),k[3]=r(c,k[3]),k[4]=r(m,k[4]),k[5]=r(f,k[5]),k[6]=r(h,k[6]),k[7]=r(y,k[7])}return k}(function(e){for(var r=Array(),t=(1<<u)-1,a=0;a<e.length*u;a+=u)r[a>>5]|=(e.charCodeAt(a/u)&t)<<24-a%32;return r}(e),e.length*u))}__webpack_exports__.handleFormJson=handleFormJson,__webpack_exports__.abortAll=abortAll,__webpack_require__.d(__webpack_exports__,"File",function(){return File}),__webpack_exports__.MD5=MD5,__webpack_exports__.SHA256=SHA256;var File={getAllFile:function(){getFile("txt",window.location.origin+"/files/test_files/file_txt.txt"),getFile("none",window.location.origin+"/files/test_files/file_none"),getFile("jpg",window.location.origin+"/files/test_imgs/img_jpg.jpg"),getFile("png",window.location.origin+"/files/test_imgs/img_png.png"),getFile("gif",window.location.origin+"/files/test_imgs/img_gif.gif"),getFile("pdf",window.location.origin+"/files/test_files/pdf.pdf"),getFile("docx",window.location.origin+"/files/test_files/docx.docx"),getFile("doc",window.location.origin+"/files/test_files/doc.doc")}},transformJson=function(){var data={fun:{main:null,loop:null,typeof:null}};return data.fun.typeof=function(e){var r=typeof e,t=Object.prototype.toString.call(e);return null===e?"Null":"undefined"==r?"Undefined":"boolean"==r?"Boolean":"number"==r?"Number":"string"==r?"String":"[object Function]"==t?"Function":"[object Array]"==t?"Array":"[object Date]"==t?"Date":"Object"},data.fun.loop=function(e){var r={item:[],loop:{array:{item:e.array.item.slice(1,e.array.item.length)},parent:{name:e.parent.name,object:e.parent.object},key:e.key}};if(e.array.item.length>0)if(r.item=JSON.parse(JSON.stringify(e.array.item)),r.item.splice(0,1),e.array.item[0]==e.parent.name&&e.array.item.length<=2)if("Array"==data.fun.typeof(r.loop.parent.object[e.array.item[0]])){var t=r.loop.parent.object[e.array.item[0]].length>=1?r.loop.parent.object[e.array.item[0]].length-1:0;"Undefined"==data.fun.typeof(r.loop.parent.object[e.array.item[0]][t])?r.loop.parent.object[e.array.item[0]][t]={}:"Object"!=data.fun.typeof(r.loop.parent.object[e.array.item[0]][t])&&(t++,r.loop.parent.object[e.array.item[0]][t]={}),r.loop.parent.object[e.array.item[0]][t][e.key.name]=e.key.value}else"Object"==data.fun.typeof(r.loop.parent.object[e.array.item[0]])?r.loop.parent.object[e.array.item[0]][e.key.name]=e.key.value:(r.loop.parent.object[e.array.item[0]]={},r.loop.parent.object[e.array.item[0]][e.key.name]=e.key.value);else"Array"==data.fun.typeof(r.loop.parent.object[e.array.item[0]])?r.loop.parent.object=r.loop.parent.object[e.array.item[0]][0]:("Object"!=data.fun.typeof(r.loop.parent.object[e.array.item[0]])&&(r.loop.parent.object[e.array.item[0]]={}),r.loop.parent.object=r.loop.parent.object[e.array.item[0]]),data.fun.loop(r.loop);else r.loop.parent.object=e.key.value},data.fun.main=function(e){var r={loopObject:null,array:{parent:e.parent||[],child:[],item:[]},loopVar:{$index:0,length:0},icon:{child:!1,parent:!1},result:e.result||{}};return e.input.map(function(e,t){r.array.item=(e.paramKey+"").replace(/(\s)*([:]{2}|[>]{2})(\s)*/g,">>").split(/[:]{2}|[>]{2}/),r.loopVar.length=r.array.item.length;try{e.paramInfo=e.paramInfo||e.paramValue,/^#/.test(e.paramInfo)&&!/^#(([1-9]\d*)|0)(\.\d*[1-9])?/.test(e.paramInfo)&&(e.paramInfo=JSON.parse(e.paramInfo.substring(1)))}catch(r){e.paramInfo=e.paramInfo}switch(r.loopVar.length){case 1:r.array.item[0]&&(r.array.parent.push(r.array.item[0]),r.result[r.array.item[0]]=e.paramInfo,r.icon.parent=!0);break;default:r.loopVar.$index=r.array.parent.indexOf(r.array.item[r.loopVar.length-2]),r.loopVar.$index>-1?(r.array.parent.push(r.array.item[r.loopVar.length-1]),r.loopObject={array:{item:r.array.item},parent:{name:r.array.item[r.loopVar.length-2],object:r.result},key:{name:r.array.item[r.loopVar.length-1],value:e.paramInfo||""}},data.fun.loop(r.loopObject),r.icon.parent=!0):(r.array.child.push(e),r.icon.child=!0)}}),r.icon.parent&&r.icon.child?r.result=data.fun.main({input:r.array.child,result:r.result,parent:r.array.parent}):r.icon.child&&r.array.child.map(function(e,t){r.result[e.paramKey]=e.paramInfo||""}),r.result},function(input){var template={input:[],output:"",match:[]};return template.input=JSON.parse(JSON.stringify(input)),template.output=JSON.stringify(data.fun.main({input:template.input}),function(e,r){return r||""}),template.match=template.output.match(/:"#(([1-9]\d*)|0)(\.\d*[1-9])?"/g)||[],template.match.map(function(val,key){template.output=template.output.replace(eval("/"+val+"/g"),val.replace(/"/g,"").replace(/#/,""))}),template.output}};!function(){function Sha1(e){e?(blocks[0]=blocks[16]=blocks[1]=blocks[2]=blocks[3]=blocks[4]=blocks[5]=blocks[6]=blocks[7]=blocks[8]=blocks[9]=blocks[10]=blocks[11]=blocks[12]=blocks[13]=blocks[14]=blocks[15]=0,this.blocks=blocks):this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1732584193,this.h1=4023233417,this.h2=2562383102,this.h3=271733878,this.h4=3285377520,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}var root="object"==typeof window?window:{},NODE_JS=!root.JS_SHA1_NO_NODE_JS&&"object"==typeof process&&process.versions&&process.versions.node;NODE_JS&&(root=global);var COMMON_JS=!root.JS_SHA1_NO_COMMON_JS&&"object"==typeof module&&module.exports,AMD="function"==typeof define&&__webpack_require__(5),HEX_CHARS="0123456789abcdef".split(""),EXTRA=[-2147483648,8388608,32768,128],SHIFT=[24,16,8,0],OUTPUT_TYPES=["hex","array","digest","arrayBuffer"],blocks=[],createOutputMethod=function(e){return function(r){return new Sha1(!0).update(r)[e]()}},createMethod=function(){var e=createOutputMethod("hex");NODE_JS&&(e=nodeWrap(e)),e.create=function(){return new Sha1},e.update=function(r){return e.create().update(r)};for(var r=0;r<OUTPUT_TYPES.length;++r){var t=OUTPUT_TYPES[r];e[t]=createOutputMethod(t)}return e},nodeWrap=function(method){var crypto=eval("require('crypto')"),Buffer=eval("require('buffer').Buffer"),nodeMethod=function(e){if("string"==typeof e)return crypto.createHash("sha1").update(e,"utf8").digest("hex");if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(void 0===e.length)return method(e);return crypto.createHash("sha1").update(new Buffer(e)).digest("hex")};return nodeMethod};Sha1.prototype.update=function(e){if(!this.finalized){var r="string"!=typeof e;r&&e.constructor===root.ArrayBuffer&&(e=new Uint8Array(e));for(var t,a,o=0,s=e.length||0,i=this.blocks;o<s;){if(this.hashed&&(this.hashed=!1,i[0]=this.block,i[16]=i[1]=i[2]=i[3]=i[4]=i[5]=i[6]=i[7]=i[8]=i[9]=i[10]=i[11]=i[12]=i[13]=i[14]=i[15]=0),r)for(a=this.start;o<s&&a<64;++o)i[a>>2]|=e[o]<<SHIFT[3&a++];else for(a=this.start;o<s&&a<64;++o)t=e.charCodeAt(o),t<128?i[a>>2]|=t<<SHIFT[3&a++]:t<2048?(i[a>>2]|=(192|t>>6)<<SHIFT[3&a++],i[a>>2]|=(128|63&t)<<SHIFT[3&a++]):t<55296||t>=57344?(i[a>>2]|=(224|t>>12)<<SHIFT[3&a++],i[a>>2]|=(128|t>>6&63)<<SHIFT[3&a++],i[a>>2]|=(128|63&t)<<SHIFT[3&a++]):(t=65536+((1023&t)<<10|1023&e.charCodeAt(++o)),i[a>>2]|=(240|t>>18)<<SHIFT[3&a++],i[a>>2]|=(128|t>>12&63)<<SHIFT[3&a++],i[a>>2]|=(128|t>>6&63)<<SHIFT[3&a++],i[a>>2]|=(128|63&t)<<SHIFT[3&a++]);this.lastByteIndex=a,this.bytes+=a-this.start,a>=64?(this.block=i[16],this.start=a-64,this.hash(),this.hashed=!0):this.start=a}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}},Sha1.prototype.finalize=function(){if(!this.finalized){this.finalized=!0;var e=this.blocks,r=this.lastByteIndex;e[16]=this.block,e[r>>2]|=EXTRA[3&r],this.block=e[16],r>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}},Sha1.prototype.hash=function(){var e,r,t,a=this.h0,o=this.h1,s=this.h2,i=this.h3,n=this.h4,l=this.blocks;for(r=16;r<80;++r)t=l[r-3]^l[r-8]^l[r-14]^l[r-16],l[r]=t<<1|t>>>31;for(r=0;r<20;r+=5)e=o&s|~o&i,t=a<<5|a>>>27,n=t+e+n+1518500249+l[r]<<0,o=o<<30|o>>>2,e=a&o|~a&s,t=n<<5|n>>>27,i=t+e+i+1518500249+l[r+1]<<0,a=a<<30|a>>>2,e=n&a|~n&o,t=i<<5|i>>>27,s=t+e+s+1518500249+l[r+2]<<0,n=n<<30|n>>>2,e=i&n|~i&a,t=s<<5|s>>>27,o=t+e+o+1518500249+l[r+3]<<0,i=i<<30|i>>>2,e=s&i|~s&n,t=o<<5|o>>>27,a=t+e+a+1518500249+l[r+4]<<0,s=s<<30|s>>>2;for(;r<40;r+=5)e=o^s^i,t=a<<5|a>>>27,n=t+e+n+1859775393+l[r]<<0,o=o<<30|o>>>2,e=a^o^s,t=n<<5|n>>>27,i=t+e+i+1859775393+l[r+1]<<0,a=a<<30|a>>>2,e=n^a^o,t=i<<5|i>>>27,s=t+e+s+1859775393+l[r+2]<<0,n=n<<30|n>>>2,e=i^n^a,t=s<<5|s>>>27,o=t+e+o+1859775393+l[r+3]<<0,i=i<<30|i>>>2,e=s^i^n,t=o<<5|o>>>27,a=t+e+a+1859775393+l[r+4]<<0,s=s<<30|s>>>2;for(;r<60;r+=5)e=o&s|o&i|s&i,t=a<<5|a>>>27,n=t+e+n-1894007588+l[r]<<0,o=o<<30|o>>>2,e=a&o|a&s|o&s,t=n<<5|n>>>27,i=t+e+i-1894007588+l[r+1]<<0,a=a<<30|a>>>2,e=n&a|n&o|a&o,t=i<<5|i>>>27,s=t+e+s-1894007588+l[r+2]<<0,n=n<<30|n>>>2,e=i&n|i&a|n&a,t=s<<5|s>>>27,o=t+e+o-1894007588+l[r+3]<<0,i=i<<30|i>>>2,e=s&i|s&n|i&n,t=o<<5|o>>>27,a=t+e+a-1894007588+l[r+4]<<0,s=s<<30|s>>>2;for(;r<80;r+=5)e=o^s^i,t=a<<5|a>>>27,n=t+e+n-899497514+l[r]<<0,o=o<<30|o>>>2,e=a^o^s,t=n<<5|n>>>27,i=t+e+i-899497514+l[r+1]<<0,a=a<<30|a>>>2,e=n^a^o,t=i<<5|i>>>27,s=t+e+s-899497514+l[r+2]<<0,n=n<<30|n>>>2,e=i^n^a,t=s<<5|s>>>27,o=t+e+o-899497514+l[r+3]<<0,i=i<<30|i>>>2,e=s^i^n,t=o<<5|o>>>27,a=t+e+a-899497514+l[r+4]<<0,s=s<<30|s>>>2;this.h0=this.h0+a<<0,this.h1=this.h1+o<<0,this.h2=this.h2+s<<0,this.h3=this.h3+i<<0,this.h4=this.h4+n<<0},Sha1.prototype.hex=function(){this.finalize();var e=this.h0,r=this.h1,t=this.h2,a=this.h3,o=this.h4;return HEX_CHARS[e>>28&15]+HEX_CHARS[e>>24&15]+HEX_CHARS[e>>20&15]+HEX_CHARS[e>>16&15]+HEX_CHARS[e>>12&15]+HEX_CHARS[e>>8&15]+HEX_CHARS[e>>4&15]+HEX_CHARS[15&e]+HEX_CHARS[r>>28&15]+HEX_CHARS[r>>24&15]+HEX_CHARS[r>>20&15]+HEX_CHARS[r>>16&15]+HEX_CHARS[r>>12&15]+HEX_CHARS[r>>8&15]+HEX_CHARS[r>>4&15]+HEX_CHARS[15&r]+HEX_CHARS[t>>28&15]+HEX_CHARS[t>>24&15]+HEX_CHARS[t>>20&15]+HEX_CHARS[t>>16&15]+HEX_CHARS[t>>12&15]+HEX_CHARS[t>>8&15]+HEX_CHARS[t>>4&15]+HEX_CHARS[15&t]+HEX_CHARS[a>>28&15]+HEX_CHARS[a>>24&15]+HEX_CHARS[a>>20&15]+HEX_CHARS[a>>16&15]+HEX_CHARS[a>>12&15]+HEX_CHARS[a>>8&15]+HEX_CHARS[a>>4&15]+HEX_CHARS[15&a]+HEX_CHARS[o>>28&15]+HEX_CHARS[o>>24&15]+HEX_CHARS[o>>20&15]+HEX_CHARS[o>>16&15]+HEX_CHARS[o>>12&15]+HEX_CHARS[o>>8&15]+HEX_CHARS[o>>4&15]+HEX_CHARS[15&o]},Sha1.prototype.toString=Sha1.prototype.hex,Sha1.prototype.digest=function(){this.finalize();var e=this.h0,r=this.h1,t=this.h2,a=this.h3,o=this.h4;return[e>>24&255,e>>16&255,e>>8&255,255&e,r>>24&255,r>>16&255,r>>8&255,255&r,t>>24&255,t>>16&255,t>>8&255,255&t,a>>24&255,a>>16&255,a>>8&255,255&a,o>>24&255,o>>16&255,o>>8&255,255&o]},Sha1.prototype.array=Sha1.prototype.digest,Sha1.prototype.arrayBuffer=function(){this.finalize();var e=new ArrayBuffer(20),r=new DataView(e);return r.setUint32(0,this.h0),r.setUint32(4,this.h1),r.setUint32(8,this.h2),r.setUint32(12,this.h3),r.setUint32(16,this.h4),e};var exports=createMethod();COMMON_JS?module.exports=exports:(root.sha1=exports,AMD&&define(function(){return exports}))}()}.call(__webpack_exports__,__webpack_require__(2),__webpack_require__(3),__webpack_require__(4)(module))},function(module,__webpack_exports__,__webpack_require__){"use strict";function beforeScript(beforeScript,url,query,headers,params,raw,env){try{return eval(beforeScript),{error:!1,url:url,query:query,headers:headers,params:params,raw:raw,env:env}}catch(e){var errorReason="";return console.log(e),errorReason=navigator.userAgent.indexOf("Firefox")>-1?e.toString():e.stack,{error:!0,errorReason:errorReason}}}function afterScript(afterScript,response){try{return eval(afterScript),{error:!1,response:response}}catch(e){var errorReason="";return console.log(e),errorReason=navigator.userAgent.indexOf("Firefox")>-1?e.toString():e.stack,{error:!0,errorReason:errorReason}}}Object.defineProperty(__webpack_exports__,"__esModule",{value:!0}),__webpack_exports__.beforeScript=beforeScript,__webpack_exports__.afterScript=afterScript},function(e,r){function t(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function o(e){if(u===setTimeout)return setTimeout(e,0);if((u===t||!u)&&setTimeout)return u=setTimeout,setTimeout(e,0);try{return u(e,0)}catch(r){try{return u.call(null,e,0)}catch(r){return u.call(this,e,0)}}}function s(e){if(p===clearTimeout)return clearTimeout(e);if((p===a||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(e);try{return p(e)}catch(r){try{return p.call(null,e)}catch(r){return p.call(this,e)}}}function i(){h&&m&&(h=!1,m.length?f=m.concat(f):y=-1,f.length&&n())}function n(){if(!h){var e=o(i);h=!0;for(var r=f.length;r;){for(m=f,f=[];++y<r;)m&&m[y].run();y=-1,r=f.length}m=null,h=!1,s(e)}}function l(e,r){this.fun=e,this.array=r}function d(){}var u,p,c=e.exports={};!function(){try{u="function"==typeof setTimeout?setTimeout:t}catch(e){u=t}try{p="function"==typeof clearTimeout?clearTimeout:a}catch(e){p=a}}();var m,f=[],h=!1,y=-1;c.nextTick=function(e){var r=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)r[t-1]=arguments[t];f.push(new l(e,r)),1!==f.length||h||o(n)},l.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=d,c.addListener=d,c.once=d,c.off=d,c.removeListener=d,c.removeAllListeners=d,c.emit=d,c.prependListener=d,c.prependOnceListener=d,c.listeners=function(e){return[]},c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},function(e,r){var t;t=function(){return this}();try{t=t||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(t=window)}e.exports=t},function(e,r){e.exports=function(e){if(!e.webpackPolyfill){var r=Object.create(e);r.children||(r.children=[]),Object.defineProperty(r,"loaded",{enumerable:!0,get:function(){return r.l}}),Object.defineProperty(r,"id",{enumerable:!0,get:function(){return r.i}}),Object.defineProperty(r,"exports",{enumerable:!0}),r.webpackPolyfill=1}return r}},function(e,r){(function(r){e.exports=r}).call(r,{})},function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function a(o,s){try{var i=r[o](s),n=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(n).then(function(e){a("next",e)},function(e){a("throw",e)});e(n)}return a("next")})}}function preCode(beforeCase){return new Promise(function(resolve,reject){function singlePreCodeTest(listIndex){return new Promise(function(resolve,reject){function handleEnv(e,r,t){if(!$.isEmptyObject(env)){env.baseUrl&&(e=env.baseUrl+e);var a=env.headers,o=(Object.key,Object.value,Object.entries),s=!0,i=!1,n=void 0;try{for(var l,d=o(a)[Symbol.iterator]();!(s=(l=d.next()).done);s=!0){var u=_slicedToArray(l.value,2),p=u[0],c=u[1],m=!1,f=!0,h=!1,y=void 0;try{for(var _,v=o(r)[Symbol.iterator]();!(f=(_=v.next()).done);f=!0){var b=_slicedToArray(_.value,2),g=b[0],x=b[1];g.toLowerCase()==p.toLowerCase()&&(m=!0)}}catch(e){h=!0,y=e}finally{try{!f&&v.return&&v.return()}finally{if(h)throw y}}0==m&&(r[p]=c)}}catch(e){i=!0,n=e}finally{try{!s&&d.return&&d.return()}finally{if(i)throw n}}if(t.constructor===Object){var k=env.extraParams,F=(Object.key,Object.value,Object.entries),C=!0,j=!1,w=void 0;try{for(var T,q=F(k)[Symbol.iterator]();!(C=(T=q.next()).done);C=!0){var z=_slicedToArray(T.value,2),E=z[0],L=z[1];E in t||(t[E]=L)}}catch(e){j=!0,w=e}finally{try{!C&&q.return&&q.return()}finally{if(j)throw w}}}var S=env.globalParams;if(!$.isEmptyObject(S)){r=JSON.stringify(r);var R=(Object.key,Object.value,Object.entries),I=!0,H=!1,O=void 0;try{for(var N,U=R(S)[Symbol.iterator]();!(I=(N=U.next()).done);I=!0){var A=_slicedToArray(N.value,2),D=A[0],P=A[1];e=e.replace("{{"+D+"}}",P);var J=new RegExp("{{"+D+"}}","gm");r=r.replace(J,P)}}catch(e){H=!0,O=e}finally{try{!I&&U.return&&U.return()}finally{if(H)throw O}}r=JSON.parse(r);var M=JSON.stringify(r).toLowerCase();if(M=JSON.parse(M),M["content-type"]&&(M["content-type"].toLowerCase().indexOf("json")>-1||M["content-type"].toLowerCase().indexOf("text")>-1?(requestType=1,contentType=M["content-type"]):M["content-type"].toLowerCase().indexOf("multipart/form-data")>-1&&(requestType=2,contentType=!1,processData=!1)),0==contentType&&"object"==(void 0===t?"undefined":_typeof(t))){var V=(Object.keys,Object.values,Object.entries),K=!0,X=!1,B=void 0;try{for(var G,Q=V(t)[Symbol.iterator]();!(K=(G=Q.next()).done);K=!0){var Z=_slicedToArray(G.value,2),Y=Z[0],W=Z[1];if("[object Blob]"==Object.prototype.toString.call(W)){var ee=!0,re=!1,te=void 0;try{for(var ae,oe=V(S)[Symbol.iterator]();!(ee=(ae=oe.next()).done);ee=!0){var se=_slicedToArray(ae.value,2),g=se[0],x=se[1],ie=new RegExp("{{"+g+"}}","gm"),ne=Y.replace(ie,x);Y!=Y.replace(ie,x)&&(t[ne]=W,delete t[Y],Y=ne)}}catch(e){re=!0,te=e}finally{try{!ee&&oe.return&&oe.return()}finally{if(re)throw te}}}else{var le=!0,de=!1,ue=void 0;try{for(var pe,ce=V(S)[Symbol.iterator]();!(le=(pe=ce.next()).done);le=!0){var me=_slicedToArray(pe.value,2),g=me[0],x=me[1],ie=new RegExp("{{"+g+"}}","gm"),fe=Y.replace(ie,x);W=W.replace(ie,x),t[fe]=W,Y!=fe&&(delete t[Y],Y=fe)}}catch(e){de=!0,ue=e}finally{try{!le&&ce.return&&ce.return()}finally{if(de)throw ue}}}}}catch(e){X=!0,B=e}finally{try{!K&&Q.return&&Q.return()}finally{if(X)throw B}}}else{t=JSON.stringify(t);var he=!0,ye=!1,_e=void 0;try{for(var ve,be=R(S)[Symbol.iterator]();!(he=(ve=be.next()).done);he=!0){var ge=_slicedToArray(ve.value,2),xe=ge[0],ke=ge[1],ie=new RegExp("{{"+xe+"}}","gm");t=t.replace(ie,ke)}}catch(e){ye=!0,_e=e}finally{try{!he&&be.return&&be.return()}finally{if(ye)throw _e}}t=JSON.parse(t)}}}return{headers:r,params:t,apiUrl:e}}function sortArray(e,r){return e.key>r.key?1:e.key===r.key?0:-1}function throwReplacer(e,r){var t=1;return caseCode.slice(0,r).replace(/\n/g,function(e,r){t++}),e+t+","}var caseCode=beforeCase.beforeCaseList[listIndex].caseCode,codeTestTime={startTime:null,finishTime:null},executeIndex=-1,contentType="application/x-www-form-urlencoded;charset=utf-8",requestType=0,processData=!0;beforeReport[listIndex]={caseName:beforeCase.beforeCaseList[listIndex].caseName,status:"finish",time:"0ms",responseList:[],successApi:0,totalApi:0};var eo={execute:null,stop:null,info:null,sha1:null,md5:null,sha256:null,img:null,file:null};eo.execute=function(apiInfo){return new Promise(function(resolve,reject){if(beforeReport[listIndex].totalApi++,executeIndex++,contentType="application/x-www-form-urlencoded;charset=utf-8",apiInfo&&apiInfo.url){var getCookieObj=function(e,r){for(var t=e.split(";"),a=0;a<t.length;a++){var o=t[a].split("=");o[1]?r.obj[o[0].replace(/\s+|"+/g,"")]=o[1]:r.cookieStr=r.cookieStr+t[a]}return r},handleRequestUrl=function(e){var r=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,t=r.exec(e),a=["url","scheme","slash","authority","port","path","query","hash"],o=[];return a.forEach(function(e,r){o[e]=t[r]}),o},handleRequestHeaders=function handleRequestHeaders(details){if(!details.initiator)if(navigator.userAgent.indexOf("Firefox")>-1)details.initiator=details.originUrl.replace("/_generated_background_page.html","");else for(var j=details.requestHeaders.length-1;j>=0;j--)if("origin"==details.requestHeaders[j].name.toLowerCase()){details.initiator=details.requestHeaders[j].value;break}var host1=handleRequestUrl(details.url).authority,apiUrl1=handleRequestUrl(apiUrl);if(apiUrl1="http"==apiUrl1.scheme&&"80"==apiUrl1.port||"https"==apiUrl1.scheme&&"443"==apiUrl1.port?apiUrl.replace(eval("/:"+apiUrl1.port+"/"),""):apiUrl,(details.initiator==initiator||-1==details.tabId)&&(details.url.indexOf(apiUrl1)>-1||Redirection.status&&Redirection.location.indexOf(host1)>-1)){var headerCookieFlag=!1,cookieName="cookie";host=handleRequestUrl(details.url).authority,host in preCookieObj.cookie||(preCookieObj.cookie[host]={cookieStr:"",obj:{}});for(var j=details.requestHeaders.length-1;j>=0;j--)"cookie"==details.requestHeaders[j].name.toLowerCase()&&(cookieName=details.requestHeaders[j].name,details.requestHeaders.splice(j,1));var _keys=Object.keys,_values=Object.values,_entries4=Object.entries,_iteratorNormalCompletion10=!0,_didIteratorError10=!1,_iteratorError10=void 0;try{for(var _iterator10=_entries4(headers)[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=!0){var _step10$value=_slicedToArray(_step10.value,2),key=_step10$value[0],value=_step10$value[1],headerFlag=!1;value=value.toString();for(var j=details.requestHeaders.length-1;j>=0;j--)details.requestHeaders[j].name.toLowerCase()==key.toLowerCase()&&(headerFlag=!0,"content-type"==key.toLowerCase()&&value.indexOf("multipart/form-data")>-1||(details.requestHeaders[j].name=key,details.requestHeaders[j].value=value));0==headerFlag&&details.requestHeaders.push({name:key,value:value}),"cookie"==key.toLowerCase()&&(headerCookieFlag=!0,preCookieObj.cookie[host]=getCookieObj(value,preCookieObj.cookie[host]))}}catch(e){_didIteratorError10=!0,_iteratorError10=e}finally{try{!_iteratorNormalCompletion10&&_iterator10.return&&_iterator10.return()}finally{if(_didIteratorError10)throw _iteratorError10}}if(0==headerCookieFlag){var cookieValue="",_keys2=Object.keys,_values2=Object.values,_entries5=Object.entries;host in preCookieObj.defaultCookie||(preCookieObj.defaultCookie[host]={cookieStr:"",obj:{}});var _iteratorNormalCompletion11=!0,_didIteratorError11=!1,_iteratorError11=void 0;try{for(var _iterator11=_entries5(preCookieObj.cookie[host].obj)[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=!0){var _step11$value=_slicedToArray(_step11.value,2),key=_step11$value[0],value=_step11$value[1];preCookieObj.defaultCookie[host].obj[key]=value}}catch(e){_didIteratorError11=!0,_iteratorError11=e}finally{try{!_iteratorNormalCompletion11&&_iterator11.return&&_iterator11.return()}finally{if(_didIteratorError11)throw _iteratorError11}}var _iteratorNormalCompletion12=!0,_didIteratorError12=!1,_iteratorError12=void 0;try{for(var _iterator12=_entries5(preCookieObj.defaultCookie[host].obj)[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=!0){var _step12$value=_slicedToArray(_step12.value,2),key=_step12$value[0],value=_step12$value[1];cookieValue=cookieValue+key+"="+value+";"}}catch(e){_didIteratorError12=!0,_iteratorError12=e}finally{try{!_iteratorNormalCompletion12&&_iterator12.return&&_iterator12.return()}finally{if(_didIteratorError12)throw _iteratorError12}}cookieValue+=preCookieObj.cookie[host].cookieStr,""!=cookieValue&&details.requestHeaders.push({name:cookieName,value:cookieValue})}for(var j=details.requestHeaders.length-1;j>=0;j--)requestHeaders[details.requestHeaders[j].name]=details.requestHeaders[j].value}return{requestHeaders:details.requestHeaders}},getResponseHeaders=function getResponseHeaders(details){if(!details.initiator)if(navigator.userAgent.indexOf("Firefox")>-1)details.initiator=details.originUrl.replace("/_generated_background_page.html","");else for(var j=details.requestHeaders.length-1;j>=0;j--)if("origin"==details.requestHeaders[j].name.toLowerCase()){details.initiator=details.requestHeaders[j].value;break}var host1=handleRequestUrl(details.url).authority,apiUrl1=handleRequestUrl(apiUrl);if(apiUrl1="http"==apiUrl1.scheme&&"80"==apiUrl1.port||"https"==apiUrl1.scheme&&"443"==apiUrl1.port?apiUrl.replace(eval("/:"+apiUrl1.port+"/"),""):apiUrl,(details.initiator==initiator||-1==details.tabId)&&details.url.indexOf(apiUrl1)>-1){302==details.statusCode&&(Redirection.status=!0),details.responseHeaders.forEach(function(e){"location"==e.name.toLowerCase()&&(Redirection.location=e.value),e.name in responseHeaders?responseHeaders[e.name]=responseHeaders[e.name]+e.value:responseHeaders[e.name]=e.value});var key=Object.key,value=Object.value,_entries6=Object.entries;host in preCookieObj.defaultCookie||(preCookieObj.defaultCookie[host]={cookieStr:"",obj:{}});var _iteratorNormalCompletion13=!0,_didIteratorError13=!1,_iteratorError13=void 0;try{for(var _iterator13=_entries6(responseHeaders)[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=!0){var _step13$value=_slicedToArray(_step13.value,2),_key9=_step13$value[0],_value8=_step13$value[1];"set-cookie"==_key9.toLowerCase()&&(preCookieObj.defaultCookie[host]=getCookieObj(_value8,preCookieObj.defaultCookie[host]))}}catch(e){_didIteratorError13=!0,_iteratorError13=e}finally{try{!_iteratorNormalCompletion13&&_iterator13.return&&_iterator13.return()}finally{if(_didIteratorError13)throw _iteratorError13}}}},apiUrl=apiInfo.url,name=apiInfo.name||"",params=apiInfo.params||[],headers=apiInfo.headers||[],method=apiInfo.method||"GET",timelimit=apiInfo.timelimit,timelimitContinue=apiInfo.timelimitContinue,dataParams=null,host="",responseHeaders={};void 0==timelimitContinue&&(timelimitContinue=!0);var beforeTime=null,responseList={},requestHeaders={},whichXhr="success";method=method.toUpperCase();var Redirection={status:!1,location:""};null==timelimit&&(timelimit=1e4);var midVal=handleEnv(apiUrl,headers,params);params=midVal.params,headers=midVal.headers,apiUrl=midVal.apiUrl;var midheaders=JSON.stringify(headers).toLowerCase();if(midheaders=JSON.parse(midheaders),midheaders["content-type"]&&(midheaders["content-type"].toLowerCase().indexOf("json")>-1||midheaders["content-type"].toLowerCase().indexOf("text")>-1?(requestType=1,contentType=midheaders["content-type"]):midheaders["content-type"].toLowerCase().indexOf("multipart/form-data")>-1&&(requestType=2,contentType=!1,processData=!1)),params.constructor===String&&1!=requestType)throw reportList.status="codeError",reportList.errorReport={content:"第"+(executeIndex+1)+"个接口头部content-type值与params不匹配"},"ignore";if(0==contentType&&"object"==(void 0===params?"undefined":_typeof(params))&&2==requestType){var keys=Object.keys,values=Object.values,entries=Object.entries;dataParams=new FormData;var _iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _iterator9=entries(params)[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0){var _step9$value=_slicedToArray(_step9.value,2),key=_step9$value[0],value=_step9$value[1];"[object Blob]"==Object.prototype.toString.call(value)?(dataParams.append(key,value,value.fileName||key),params[key]="[object Blob]"):dataParams.append(key,value)}}catch(e){_didIteratorError9=!0,_iteratorError9=e}finally{try{!_iteratorNormalCompletion9&&_iterator9.return&&_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9}}}else dataParams=params;"http://"!=apiUrl.substring(0,7)&&"https://"!=apiUrl.substring(0,8)&&(apiUrl="http://"+apiUrl),apiUrl=encodeURI(apiUrl),window.parent.chrome.webRequest.onBeforeSendHeaders.addListener(handleRequestHeaders,{urls:["http://*/*","https://*/*"],types:["xmlhttprequest"]},["blocking","requestHeaders"]),window.parent.chrome.webRequest.onHeadersReceived.addListener(getResponseHeaders,{urls:["<all_urls>"]},["responseHeaders","blocking"]);var timeout=null;apiUrl=encodeURI(decodeURI(apiUrl));var Ajax=$.ajax({url:apiUrl,beforeSend:function(e){function r(){beforeReport[listIndex].responseList[executeIndex]={apiIndex:executeIndex,general:{time:timelimit+"ms",requestUrl:apiUrl,status:"timeout",requestMethod:method,timeLimit:timelimit,name:name},responseHeaders:null,requestHeaders:requestHeaders,requestBody:{requestType:requestType,body:params||null},response:null,reportList:[{type:"timeout",content:"请求超时"}]},timelimitContinue||(reject("ignore"),beforeReport[listIndex].status="timeout"),Ajax.abort()}beforeTime=new Date,timeout=setTimeout(r,Number(timelimit)||0)},async:!0,method:method,data:dataParams,processData:processData,contentType:contentType}).done(function(e,r,t){clearTimeout(timeout),whichXhr="success"}).fail(function(e,r,t){clearTimeout(timeout),whichXhr="error","abort"==r&&beforeReport[listIndex].responseList[executeIndex]&&!timelimitContinue&&reject("ignore")}).always(function(e,r,t){chrome.webRequest.onBeforeSendHeaders.removeListener(handleRequestHeaders),chrome.webRequest.onHeadersReceived.removeListener(getResponseHeaders),contentType="application/x-www-form-urlencoded;charset=utf-8",processData=!0;var a;a="success"==whichXhr?t:e;var o=new Date,o=o-beforeTime;if(beforeReport[listIndex].responseList[executeIndex]);else{var s=a.responseText;try{s=JSON.parse(s)}catch(e){}0!=a.status?beforeReport[listIndex].responseList[executeIndex]={apiIndex:executeIndex,general:{time:o+"ms",requestUrl:apiUrl,status:"finish",requestMethod:method,timeLimit:timelimit,statusCode:a.status,name:name},requestBody:{requestType:requestType,body:params},response:a.responseText,responseHeaders:responseHeaders,requestHeaders:requestHeaders,reportList:[]}:beforeReport[listIndex].responseList[executeIndex]={apiIndex:executeIndex,general:{time:o+"ms",requestUrl:apiUrl,status:"error",requestMethod:method,timeLimit:timelimit,statusCode:a.status,name:name},requestBody:{requestType:requestType,body:params},response:null,responseHeaders:null,requestHeaders:requestHeaders,reportList:[{type:"error",content:"target server no answer"}]}}resolve({time:o+"ms",code:a.status,response:s,header:responseHeaders})});ajaxs.push(Ajax)}else{var index=executeIndex+1;reject("第"+index+"个eo.execute()传入信息有误")}})},eo.stop=function(e,r){throw beforeReport[listIndex].status="interrupt",beforeReport[listIndex].responseList[executeIndex].general.status="interrupt",beforeReport[listIndex].responseList[executeIndex].reportList.push({type:"interrupt",content:r,lineNum:e}),"ignore"},eo.info=function(e,r,t){if(beforeReport[listIndex].responseList[executeIndex]&&(beforeReport[listIndex].responseList[executeIndex].reportList.push({type:"info",content:r,lineNum:e}),t))throw"ignore"},eo.img=function(e){if("jpg"==e.toLowerCase()||"png"==e.toLowerCase()||"gif"==e.toLowerCase())return _commonUtils.File[e.toLowerCase()];throw beforeReport[listIndex].status="codeError",beforeReport[listIndex].errorReport={content:"eo.img传值错误"},"ignore"},eo.file=function(e){if("txt"==e.toLowerCase()||"none"==e.toLowerCase()||"doc"==e.toLowerCase()||"docx"==e.toLowerCase()||"pdf"==e.toLowerCase())return _commonUtils.File[e.toLowerCase()];throw beforeReport[listIndex].status="codeError",beforeReport[listIndex].errorReport={content:"eo.file传值错误"},"ignore"},eo.MD5=eo.Md5=eo.md5=function(e,r){try{return(0,_commonUtils.MD5)(e.toString(),r)}catch(e){throw beforeReport[listIndex].status="codeError",beforeReport[listIndex].errorReport={content:"eo.md5传值错误"},"ignore"}},eo.SHA1=eo.Sha1=eo.sha1=function(e){if(e){return sha1(e.toString())}throw beforeReport[listIndex].status="codeError",beforeReport[listIndex].errorReport={content:"eo.sha1传值错误"},"ignore"},eo.SHA256=eo.Sha256=eo.sha256=function(e){if(e){return(0,_commonUtils.SHA256)(e.toString())}throw beforeReport[listIndex].status="codeError",beforeReport[listIndex].errorReport={content:"eo.sha256传值错误"},"ignore"},Object.freeze(eo),caseCode=caseCode.replace(/eo\.info\(/g,throwReplacer),caseCode=caseCode.replace(/eo\.stop\(/g,throwReplacer),caseCode=caseCode.replace(/eo\.execute\(/g,function(e,r){return"await "+e});var stringFun=function(){sendRequest().then(function(e){codeTestTime.finishTime=new Date,codeTestTime.finishTime=codeTestTime.finishTime-codeTestTime.startTime,beforeReport[listIndex].time=codeTestTime.finishTime+"ms",beforeReport[listIndex].responseList.forEach(function(e){"finish"==e.general.status&&beforeReport[listIndex].successApi++}),resolve("第"+listIndex+"前置用例结束")}).catch(function(e){if(console.error("【async】",e),"ignore"!=e){if(r="",navigator.userAgent.indexOf("Firefox")>-1)var r=e.toString();else r=e.stack;beforeReport[listIndex].status="codeError",e.toString().indexOf("传入信息有误")>-1&&(r=e+"，请检查"),r.indexOf("Illegal invocation")>-1&&(r="非法调用，如：文件请求没有添加头部multipart/form-data，传参类型错误等"),beforeReport[listIndex].errorReport={content:r}}codeTestTime.finishTime=new Date,codeTestTime.finishTime=codeTestTime.finishTime-codeTestTime.startTime,beforeReport[listIndex].time=codeTestTime.finishTime+"ms",beforeReport[listIndex].responseList.forEach(function(e){"finish"==e.general.status&&beforeReport[listIndex].successApi++}),resolve("第"+listIndex+"个前置用例抛出")})};caseCode="async function sendRequest() {\n"+caseCode+"\n};\n("+stringFun.toString()+")();\n";try{codeTestTime.startTime=new Date,eval(caseCode)}catch(e){if("ignore"!=e){if(content="",navigator.userAgent.indexOf("Firefox")>-1)var content=e.toString();else content=e.stack;beforeReport[listIndex].status="codeError",content.indexOf("await is only valid in async function")>-1&&(content="请不要在函数内执行eo.execute()函数"),beforeReport[listIndex].errorReport={content:content}}codeTestTime.finishTime=new Date,codeTestTime.finishTime=codeTestTime.finishTime-codeTestTime.startTime,beforeReport[listIndex].time=codeTestTime.finishTime+"ms",console.log("【caseCode】",e)}})}var asyncControl=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<beforeCase.beforeCaseList.length)){e.next=10;break}if(!stopStatus){e.next=5;break}return reject("stop"),e.abrupt("break",10);case 5:return e.next=7,singlePreCodeTest(r).then(function(e){console.log(e)});case 7:r++,e.next=1;break;case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();stopStatus=!1;var initiator=window.location.origin,beforeReport=[],preCookieObj={cookie:{example:{cookieStr:"",obj:{}}},defaultCookie:{example:{cookieStr:"",obj:{}}}},env={baseUrl:"",headers:{},extraParams:{},globalParams:{}};if(!$.isEmptyObject(beforeCase.env)){beforeCase.env.frontURIList[0]&&(env.baseUrl=""==env.baseUrl?beforeCase.env.frontURIList[0].uri:env.baseUrl);for(var paramList={},i=0;i<beforeCase.env.paramList.length;i++)paramList[beforeCase.env.paramList[i].paramKey]=beforeCase.env.paramList[i].paramValue;for(var headerList={},i=0;i<beforeCase.env.headerList.length;i++)headerList[beforeCase.env.headerList[i].headerName]=beforeCase.env.headerList[i].headerValue;for(var additionalParamList={},i=0;i<beforeCase.env.additionalParamList.length;i++)additionalParamList[beforeCase.env.additionalParamList[i].paramKey]=beforeCase.env.additionalParamList[i].paramValue;env.headers=Object.assign({},headerList,env.headers),env.extraParams=Object.assign({},additionalParamList,env.extraParams),env.globalParams=Object.assign({},paramList,env.globalParams)}asyncControl().then(function(){resolve({report:beforeReport,cookie:preCookieObj,env:env})}).catch(function(e){resolve({report:beforeReport,cookie:preCookieObj,env:env}),console.log(e)})})}Object.defineProperty(exports,"__esModule",{value:!0});var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_slicedToArray=function(){function e(e,r){var t=[],a=!0,o=!1,s=void 0;try{for(var i,n=e[Symbol.iterator]();!(a=(i=n.next()).done)&&(t.push(i.value),!r||t.length!==r);a=!0);}catch(e){o=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw s}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();exports.preCode=preCode;var _commonUtils=__webpack_require__(0),ajaxs=[],stopStatus=!1;chrome.runtime.onConnect.addListener(function(e){"autoTest"!=e.name&&"autoCodeTest"!=e.name||e.onMessage.addListener(function(e){1==e.stopStatus&&(stopStatus=!0,(0,_commonUtils.abortAll)(ajaxs))})})},function(e,r,t){t(0),t(6),t(1),t(8),t(9),t(10),t(11)},function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function e(e,r){var t=[],a=!0,o=!1,s=void 0;try{for(var i,n=e[Symbol.iterator]();!(a=(i=n.next()).done)&&(t.push(i.value),!r||t.length!==r);a=!0);}catch(e){o=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw s}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_commonUtils=__webpack_require__(0),_injectCode=__webpack_require__(1);chrome.runtime.onConnect.addListener(function(normal){var initiator=window.location.origin,freeze={ajax:null};if("normalTest"==normal.name){var initiator=window.location.origin,freeze={ajax:null};normal.onMessage.addListener(function(content){if(1==content.stopStatus)freeze.ajax.abort();else{var handleTime=function(e){var r,t,a,o,s,i;return r=e.getFullYear()+"-",t=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()+" ",o=e.getHours()+":",s=e.getMinutes()+":",i=e.getSeconds(),e=r+t+a+o+s+i},handleRequestUrl=function(e){var r=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,t=r.exec(e),a=["url","scheme","slash","authority","port","path","query","hash"],o=[];return a.forEach(function(e,r){o[e]=t[r]}),o},getResponseHeaders=function(e){eoFreeze.request.responseHeaders=e.responseHeaders.slice(0)},sortArray=function(e,r){return e.name>r.name?1:e.name===r.name?0:-1},handleArguments=function(){for(var e=0;e<eoFreeze.data.headers.length;)eoFreeze.data.headers[e].headerName&&0!=eoFreeze.data.headers[e].checkbox?(headers[eoFreeze.data.headers[e].headerName]=eoFreeze.data.headers[e].headerValue,e++):eoFreeze.data.headers.splice(e,1);if("1"==eoFreeze.data.requestType)raw=eoFreeze.data.raw;else for(var e=0;e<eoFreeze.data.params.length;)if(eoFreeze.data.params[e].paramKey&&0!=eoFreeze.data.params[e].checkbox){if(1==eoFreeze.data.flagFile)if("1"==eoFreeze.data.params[e].paramType&&eoFreeze.data.params[e].paramInfo&&eoFreeze.data.params[e].files){params[eoFreeze.data.params[e].paramKey]=[];var r="";r=eoFreeze.data.params[e].paramInfo.split(",");for(var t=0;eoFreeze.data.params[e].files&&t<eoFreeze.data.params[e].files.length;t++)params[eoFreeze.data.params[e].paramKey][t]=dataURLtoBlob(eoFreeze.data.params[e].files[t]),params[eoFreeze.data.params[e].paramKey][t].name=r[t]}else params[eoFreeze.data.params[e].paramKey]=eoFreeze.data.params[e].paramInfo||"";else params[eoFreeze.data.params[e].paramKey]=eoFreeze.data.params[e].paramInfo||"";e++}else eoFreeze.data.params.splice(e,1)},handleRequestHeaders=function(e){if(!e.initiator)if(navigator.userAgent.indexOf("Firefox")>-1)e.initiator=e.originUrl.replace("/_generated_background_page.html","");else for(var r=e.requestHeaders.length-1;r>=0;r--)if("origin"==e.requestHeaders[r].name.toLowerCase()){e.initiator=e.requestHeaders[r].value;break}if(e.initiator==initiator||-1==e.tabId){if(eoFreeze.request.requestHeaders=[],eoFreeze.data.auth&&1==eoFreeze.data.auth.status){var t=eoFreeze.data.auth.basicAuth.username+":"+eoFreeze.data.auth.basicAuth.password,a="Basic "+b64EncodeUnicode(t);e.requestHeaders.push({name:"Authorization",value:a})}eoFreeze.data.headers.forEach(function(r){for(var t=0,a=e.requestHeaders.length-1;a>=0;a--)if(e.requestHeaders[a].name.toLowerCase()==r.headerName.toLowerCase()){t=1,e.requestHeaders[a].name=e.requestHeaders[a].name,e.requestHeaders[a].value=r.headerValue;break}0==t&&e.requestHeaders.push({name:r.headerName,value:r.headerValue.toString()})});e.requestHeaders.slice(0).forEach(function(e){eoFreeze.request.requestHeaders.push({key:e.name,value:e.value})}),eoFreeze.request.requestHeaders=eoFreeze.request.requestHeaders.sort(sortArray)}return{requestHeaders:e.requestHeaders}},dataURLtoBlob=function(e){for(var r=e.split(","),t=r[0].match(/:(.*?);/)[1],a=atob(r[1]),o=a.length,s=new Uint8Array(o);o--;)s[o]=a.charCodeAt(o);return new Blob([s],{type:t})},b64EncodeUnicode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,r){return String.fromCharCode("0x"+r)}))},getQuery=function(e){var r={};if(e.indexOf("?")>-1){var t=e.substring(e.indexOf("?")+1);t=t.split("&"),t.forEach(function(e,t){var a=e.split("=");r[a[0]]=a[1]})}return r},handleCodeArguments=function(){var e=(Object.key,Object.value,Object.entries),r={isExist:!1},t={isExist:!1},a=!0,o=!1,s=void 0;try{for(var i,n=e(params)[Symbol.iterator]();!(a=(i=n.next()).done);a=!0){var l=_slicedToArray(i.value,2),d=l[0],u=l[1];r.isExist=!1;for(var p=eoFreeze.data.params.length-1;p>=0;p--)if(eoFreeze.data.params[p].paramKey==d){r.isExist=!0,eoFreeze.data.params[p].paramInfo=u;break}0==r.isExist&&eoFreeze.data.params.push({paramKey:d,paramInfo:u,checkbox:!0})}}catch(e){o=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw s}}var c=!0,m=!1,f=void 0;try{for(var h,y=e(headers)[Symbol.iterator]();!(c=(h=y.next()).done);c=!0){for(var _=_slicedToArray(h.value,2),v=_[0],b=_[1],p=eoFreeze.data.headers.length-1;p>=0;p--)if(eoFreeze.data.headers[p].headerName.toLowerCase()==v.toLowerCase()){t.isExist=!0,eoFreeze.data.headers[p].headerValue=b.toString();break}0==t.isExist&&eoFreeze.data.headers.push({headerName:v,headerValue:b.toString(),checkbox:!0})}}catch(e){m=!0,f=e}finally{try{!c&&y.return&&y.return()}finally{if(m)throw f}}eoFreeze.data.env=[];var g=!0,x=!1,k=void 0;try{for(var F,C=e(env.globalParams)[Symbol.iterator]();!(g=(F=C.next()).done);g=!0){var j=_slicedToArray(F.value,2),w=j[0],T=j[1];eoFreeze.data.env.push({paramKey:w,paramValue:T})}}catch(e){x=!0,k=e}finally{try{!g&&C.return&&C.return()}finally{if(x)throw k}}},handleQuery=function(){var e={fun:{joint:null}};e.fun.joint=function(e){var r="",t=(Object.key,Object.value,Object.entries),a=!0,o=!1,s=void 0;try{for(var i,n=t(e)[Symbol.iterator]();!(a=(i=n.next()).done);a=!0){var l=_slicedToArray(i.value,2),d=l[0],u=l[1];r=""==r?d+"="+u:r+"&"+d+"="+u}}catch(e){o=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw s}}return r},0==$.isEmptyObject(query)&&(url=-1==url.indexOf("?")?url+"?"+e.fun.joint(query):url.split("?")[0]+"?"+e.fun.joint(query))},handleEnv=function handleEnv(){if(!$.isEmptyObject(env)){env.baseUrl&&(url=env.baseUrl+url);var envHeaders=env.headers,headerExist=!1,key=Object.key,value=Object.value,entries=Object.entries,_iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _iterator5=entries(envHeaders)[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var _step5$value=_slicedToArray(_step5.value,2),_key5=_step5$value[0],_value5=_step5$value[1];headerExist=!1;for(var i=eoFreeze.data.headers.length-1;i>=0;i--)_key5.toLowerCase()==eoFreeze.data.headers[i].headerName.toLowerCase()&&(headerExist=!0);0==headerExist&&eoFreeze.data.headers.push({headerName:_key5,headerValue:_value5.toString()})}}catch(e){_didIteratorError5=!0,_iteratorError5=e}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}var envParams=env.extraParams,paramExist=!1,_iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _iterator6=entries(envParams)[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var _step6$value=_slicedToArray(_step6.value,2),_key6=_step6$value[0],_value6=_step6$value[1];paramExist=!1;for(var i=eoFreeze.data.params.length-1;i>=0;i--)_key6.toLowerCase()==eoFreeze.data.params[i].paramKey.toLowerCase()&&(paramExist=!0);0==paramExist&&eoFreeze.data.params.push({paramKey:_key6,paramInfo:_value6})}}catch(e){_didIteratorError6=!0,_iteratorError6=e}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}if(eoFreeze.data.env&&0!=eoFreeze.data.env.length){eoFreeze.data.headers=JSON.stringify(eoFreeze.data.headers);for(var j=0;j<eoFreeze.data.env.length;j++){url=url.replace(eval("/{{"+eoFreeze.data.env[j].paramKey+"}}/g"),eoFreeze.data.env[j].paramValue);var regHeaders=new RegExp("{{"+eoFreeze.data.env[j].paramKey+"}}","gm");eoFreeze.data.headers=eoFreeze.data.headers.replace(regHeaders,eoFreeze.data.env[j].paramValue)}if(eoFreeze.data.headers=JSON.parse(eoFreeze.data.headers),"1"==eoFreeze.data.requestType)for(var j=0;j<eoFreeze.data.env.length;j++){var regRaw=new RegExp("{{"+eoFreeze.data.env[j].paramKey+"}}","gm");raw=raw.toString().replace(regRaw,eoFreeze.data.env[j].paramValue)}else if(1==eoFreeze.data.flagFile)for(var i=0;i<eoFreeze.data.env.length;i++)for(var regParams=new RegExp("{{"+eoFreeze.data.env[i].paramKey+"}}","gm"),j=0;j<eoFreeze.data.params.length;j++)1!=eoFreeze.data.params[j].paramType&&eoFreeze.data.params[j].paramInfo&&(eoFreeze.data.params[j].paramKey=eoFreeze.data.params[j].paramKey.replace(regParams,eoFreeze.data.env[i].paramValue),eoFreeze.data.params[j].paramInfo=eoFreeze.data.params[j].paramInfo.replace(regParams,eoFreeze.data.env[i].paramValue));else{eoFreeze.data.params=JSON.stringify(eoFreeze.data.params);for(var j=0;j<eoFreeze.data.env.length;j++){var regParams=new RegExp("{{"+eoFreeze.data.env[j].paramKey+"}}","gm");eoFreeze.data.params=eoFreeze.data.params.replace(regParams,eoFreeze.data.env[j].paramValue)}eoFreeze.data.params=JSON.parse(eoFreeze.data.params)}}}},handleProtocol=function(e){var r="1"==eoFreeze.data.httpHeader?"https://":"http://";return"http://"==e.substring(0,7)?eoFreeze.request.scheme="http":"https://"==e.substring(0,8)?eoFreeze.request.scheme="https":e=r+e,e},handleResponseHeader=function(e){for(var r=[],t=0;t<e.length;t++)r.push({key:e[t].name,value:e[t].value});return r},eoFreeze={constant:{unsafeHeaders:["Content-Length"]},request:{apiUrl:content.requestInfo.URL,scheme:"",requestHeaders:[],responseHeaders:[],formData:new FormData,dataParams:{},beforeTime:{},flagFormDataToJson:!1,processData:!0,ContentType:"application/x-www-form-urlencoded"},response:{error:{},whichXhr:"success"},report:{params:{formdata:{}},requestType:content.requestInfo.requestType.toString(),headers:{}},data:{httpHeader:content.requestInfo.httpHeader,requestType:content.requestInfo.requestType.toString(),method:content.requestInfo.apiRequestType||content.method.toString(),params:content.requestInfo.params,raw:content.requestInfo.raw,headers:content.requestInfo.headers,Url:content.requestInfo.URL,flagFile:content.flagFile,env:content.env,auth:content.auth,beforeScript:content.script?content.script.before:"",afterScript:content.script?content.script.after:"",flagQuickTest:content.quickTest||0}},env={baseUrl:"",headers:{},extraParams:{},globalParams:{}},url="",params={},headers={},query={},raw="",response=null;switch(eoFreeze.data.method){case"1":eoFreeze.data.method="GET";break;case"2":eoFreeze.data.method="PUT";break;case"3":eoFreeze.data.method="DELETE";break;case"4":eoFreeze.data.method="HEAD";break;case"5":eoFreeze.data.method="OPTIONS";break;case"6":eoFreeze.data.method="PATCH";break;default:eoFreeze.data.method="POST"}url=eoFreeze.request.apiUrl,handleArguments(),query=getQuery(url),eoFreeze.data.env.forEach(function(e,r){env.globalParams[e.paramKey]=e.paramValue});var beforeResult=(0,_injectCode.beforeScript)(eoFreeze.data.beforeScript,url,query,headers,params,raw,env);if(beforeResult.error){var backData={statusCode:"210001",type:"plug",errorText:beforeResult.errorReason};return backData=JSON.stringify(backData),void normal.postMessage({backResult:backData})}if(url=beforeResult.url,query=beforeResult.query,headers=beforeResult.headers,params=beforeResult.params,raw=beforeResult.raw,env=beforeResult.env,raw&&(eoFreeze.data.requestType="1"),handleCodeArguments(),handleQuery(),handleEnv(),"2"==eoFreeze.data.requestType)for(var i=0;i<eoFreeze.data.params.length;){var beforUrl=url;url=url.replace(eval("/{(?!{)"+eoFreeze.data.params[i].paramKey+"}(?!})/g"),eoFreeze.data.params[i].paramInfo),beforUrl!=url?(delete params[eoFreeze.data.params[i].paramKey],eoFreeze.data.params.splice(i,1)):i++}switch(url=handleProtocol(url),"formDataToJson"in content&&(eoFreeze.request.flagFormDataToJson=content.formDataToJson.checkbox,1==eoFreeze.request.flagFormDataToJson&&(eoFreeze.report.requestType="1")),eoFreeze.data.requestType){case"0":if(eoFreeze.request.flagFormDataToJson){var formJsonData=(0,_commonUtils.handleFormJson)(eoFreeze.data.params);1==formJsonData.error.status&&(eoFreeze.response.error=formJsonData.error),eoFreeze.request.dataParams=formJsonData.dataParams,eoFreeze.report.params.formdata=formJsonData.dataParams}else for(var i=0;i<eoFreeze.data.params.length;i++)if(1==eoFreeze.data.flagFile)if("1"==eoFreeze.data.params[i].paramType&&eoFreeze.data.params[i].paramInfo&&eoFreeze.data.params[i].files)for(var j=0;j<eoFreeze.data.params[i].paramInfo.length;j++)eoFreeze.request.formData.append(eoFreeze.data.params[i].paramKey,eoFreeze.data.params[i].paramInfo[j],eoFreeze.data.params[i].paramInfo[j].name),eoFreeze.report.params.formdata[eoFreeze.data.params[i].paramKey]="[Object blob]";else{try{"string"!=typeof eoFreeze.data.params[i].paramInfo&&(eoFreeze.data.params[i].paramInfo=JSON.stringify(eoFreeze.data.params[i].paramInfo))}catch(e){}eoFreeze.request.formData.append(eoFreeze.data.params[i].paramKey,eoFreeze.data.params[i].paramInfo),eoFreeze.report.params.formdata[eoFreeze.data.params[i].paramKey]=eoFreeze.data.params[i].paramInfo}else{try{"string"!=typeof eoFreeze.data.params[i].paramInfo&&(eoFreeze.data.params[i].paramInfo=JSON.stringify(eoFreeze.data.params[i].paramInfo))}catch(e){}eoFreeze.request.dataParams[eoFreeze.data.params[i].paramKey]=eoFreeze.data.params[i].paramInfo,eoFreeze.report.params.formdata[eoFreeze.data.params[i].paramKey]=eoFreeze.data.params[i].paramInfo}break;case"1":eoFreeze.request.ContentType="text/plain; charset=UTF-8",eoFreeze.request.dataParams=raw,eoFreeze.report.params.formdata=raw;break;default:if(eoFreeze.request.flagFormDataToJson){var formJsonData=(0,_commonUtils.handleFormJson)(eoFreeze.data.params);eoFreeze.request.dataParams=formJsonData.dataParams,eoFreeze.report.params.formdata=formJsonData.dataParams}else for(var i=0;i<eoFreeze.data.params.length;i++)eoFreeze.request.dataParams[eoFreeze.data.params[i].paramKey]=eoFreeze.data.params[i].paramInfo,eoFreeze.report.params.formdata[eoFreeze.data.params[i].paramKey]=eoFreeze.data.params[i].paramInfo}formJsonData&&(eoFreeze.request.ContentType="application/json"),1==eoFreeze.data.flagFile&&"0"==eoFreeze.data.requestType&&(eoFreeze.request.ContentType=!1,eoFreeze.request.processData=!1,eoFreeze.request.dataParams=eoFreeze.request.formData),chrome.webRequest.onBeforeSendHeaders.addListener(handleRequestHeaders,{urls:["http://*/*","https://*/*"],types:["xmlhttprequest"]},["blocking","requestHeaders"]),window.parent.chrome.webRequest.onHeadersReceived.addListener(getResponseHeaders,{urls:["<all_urls>"]},["responseHeaders","blocking"]),url=encodeURI(decodeURI(url)),freeze.ajax=$.ajax({url:url,beforeSend:function(e){eoFreeze.request.beforeTime=new Date},processData:eoFreeze.request.processData,contentType:eoFreeze.request.ContentType,type:eoFreeze.data.method,async:!0,data:eoFreeze.request.dataParams}).done(function(e,r,t){eoFreeze.response.whichXhr="success"}).fail(function(e,r){eoFreeze.response.whichXhr="error",0==e.status&&(eoFreeze.response.error={status:1,errorText:"target server no answer"})}).always(function(e,r,t){var a={};chrome.webRequest.onBeforeSendHeaders.removeListener(handleRequestHeaders),chrome.webRequest.onHeadersReceived.removeListener(getResponseHeaders);var o;if(o="success"==eoFreeze.response.whichXhr?t:e,0!=o.status&&1!=eoFreeze.response.error.status){var s=new Date;handleTime(eoFreeze.request.beforeTime),s-=eoFreeze.request.beforeTime,eoFreeze.request.responseHeaders=eoFreeze.request.responseHeaders.sort(sortArray);var i=handleResponseHeader(eoFreeze.request.responseHeaders),n=o.getResponseHeader("Content-Type");n&&-1!=n.indexOf("image/")&&(o.responseText=eoFreeze.request.apiUrl);try{response=JSON.parse(o.responseText)}catch(e){response=o.responseText}var l=(0,_injectCode.afterScript)(eoFreeze.data.afterScript,response);if(l.error){var d={statusCode:"210001",type:"plug",errorText:l.errorReason};return d=JSON.stringify(d),void normal.postMessage({backResult:d})}response=l.response;try{"string"!=typeof response&&(response=JSON.stringify(response),JSON.stringify(JSON.parse(o.responseText))==response&&(response=o.responseText))}catch(e){}a={statusCode:"000000",testHttpCode:o.status,requestBody:{url:url,params:{requestType:eoFreeze.report.requestType,body:eoFreeze.report.params.formdata},query:query,headers:eoFreeze.request.requestHeaders},testResult:{headers:i,body:response,response:o.responseText},testDeny:s}}else a={statusCode:"210000",type:"plug",errorText:eoFreeze.response.error.errorText};a=JSON.stringify(a),normal.postMessage({backResult:a})})}})}})},function(module,exports,__webpack_require__){"use strict";var _slicedToArray=function(){function e(e,r){var t=[],a=!0,o=!1,s=void 0;try{for(var i,n=e[Symbol.iterator]();!(a=(i=n.next()).done)&&(t.push(i.value),!r||t.length!==r);a=!0);}catch(e){o=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw s}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_commonUtils=__webpack_require__(0),_injectCode=__webpack_require__(1);chrome.runtime.onConnect.addListener(function(batch){if("batchTest"==batch.name){var b64EncodeUnicode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,r){return String.fromCharCode("0x"+r)}))},handleRequestHeaders=function(e){if(eoData.array[0]){-1==eoData.requestId&&(eoData.requestId=e.requestId);var r=eoData.array[e.requestId-eoData.requestId];if(r.apiUrl){if(!e.initiator)if(navigator.userAgent.indexOf("Firefox")>-1)e.initiator=e.originUrl.replace("/_generated_background_page.html","");else for(var t=e.requestHeaders.length-1;t>=0;t--)if("origin"==e.requestHeaders[t].name.toLowerCase()){e.initiator=e.requestHeaders[t].value;break}if(e.initiator==initiator||-1==e.tabId){if(allRequestHeaders[e.requestId-eoData.requestId]=[],r.headers.forEach(function(r){for(var t=0,a=e.requestHeaders.length-1;a>=0;a--)e.requestHeaders[a].name.toLowerCase()==r.headerName.toLowerCase()&&(t=1,e.requestHeaders[a].name=r.headerName,e.requestHeaders[a].value=r.headerValue);0==t&&e.requestHeaders.push({name:r.headerName,value:r.headerValue})}),r.auth&&1==r.auth.status){var a=r.auth.basicAuth.username+":"+r.auth.basicAuth.password,o="Basic "+b64EncodeUnicode(a);e.requestHeaders.push({name:"Authorization",value:o})}for(var s={},t=e.requestHeaders.length-1;t>=0;t--)s[e.requestHeaders[t].name]=e.requestHeaders[t].value;allRequestHeaders[e.requestId-eoData.requestId]=s}}return{requestHeaders:e.requestHeaders}}},initiator=window.location.origin,eoData={requestId:-1,array:[]},ajaxs=[],allRequestHeaders=[];window.parent.chrome.webRequest.onBeforeSendHeaders.addListener(handleRequestHeaders,{urls:["http://*/*","https://*/*"],types:["xmlhttprequest"]},["blocking","requestHeaders"]),batch.onMessage.addListener(function(webInfo){if(1==webInfo.stopStatus)0==webInfo.index?(0,_commonUtils.abortAll)(ajaxs):ajaxs[webInfo.index-1].abort();else{var length,id,amount,backResult,productType,oldDeployVersion,k,code,data,eoFreeze,env,url,params,headers,query,raw,response,beforeResult,i,beforUrl,i,formJsonData,i,formJsonData,Ajax;!function(){var sortArray=function(e,r){return e.key>r.key?1:e.key===r.key?0:-1},handleTime=function(e){var r,t,a,o,s,i;return r=e.getFullYear()+"-",t=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()+" ",o=e.getHours()+":",s=e.getMinutes()+":",i=e.getSeconds(),e=r+t+a+o+s+i},handleResponseHeader=function(e){for(var r=e.split("\r\n"),t=[],a=0;a<r.length-1;a++)r[a]=r[a].split(": "),t.push({key:r[a][0],value:r[a][1]});return t};for(length=webInfo.caseList.length,id=-1,amount=webInfo.amount,backResult={responseList:[{responseType:"error"}],status:"tested"},productType=webInfo.productType,oldDeployVersion=webInfo.oldDeployVersion,backResult.responseList=new Array(amount),k=0;k<length;k++)if(code=webInfo.caseList[k].statusCode){var handleArguments=function(){for(var e=0;e<eoFreeze.data.headers.length;)eoFreeze.data.headers[e].headerName&&0!=eoFreeze.data.headers[e].checkbox?(headers[eoFreeze.data.headers[e].headerName]=eoFreeze.data.headers[e].headerValue,e++):eoFreeze.data.headers.splice(e,1);if("1"==eoFreeze.data.requestType)raw=eoFreeze.data.raw;else for(var e=0;e<eoFreeze.data.params.length;)eoFreeze.data.params[e].paramKey&&0!=eoFreeze.data.params[e].checkbox?(params[eoFreeze.data.params[e].paramKey]=eoFreeze.data.params[e].paramInfo||"",e++):eoFreeze.data.params.splice(e,1);if(!$.isEmptyObject(eoFreeze.data.env)){eoFreeze.data.env.frontURIList[0]&&(env.baseUrl=""==env.baseUrl?eoFreeze.data.env.frontURIList[0].uri:env.baseUrl);for(var r={},e=0;e<eoFreeze.data.env.paramList.length;e++)r[eoFreeze.data.env.paramList[e].paramKey]=eoFreeze.data.env.paramList[e].paramValue;for(var t={},e=0;e<eoFreeze.data.env.headerList.length;e++)t[eoFreeze.data.env.headerList[e].headerName]=eoFreeze.data.env.headerList[e].headerValue;for(var a={},e=0;e<eoFreeze.data.env.additionalParamList.length;e++)a[eoFreeze.data.env.additionalParamList[e].paramKey]=eoFreeze.data.env.additionalParamList[e].paramValue;env.headers=t,env.extraParams=a,env.globalParams=r}},getQuery=function(e){var r={};if(e.indexOf("?")>-1){var t=e.substring(e.indexOf("?")+1);t=t.split("&"),t.forEach(function(e,t){var a=e.split("=");r[a[0]]=a[1]})}return r},handleCodeArguments=function(){var e=(Object.key,Object.value,Object.entries),r={isExist:!1},t={isExist:!1},a=!0,o=!1,s=void 0;try{for(var i,n=e(params)[Symbol.iterator]();!(a=(i=n.next()).done);a=!0){var l=_slicedToArray(i.value,2),d=l[0],u=l[1];r.isExist=!1;for(var p=eoFreeze.data.params.length-1;p>=0;p--)if(eoFreeze.data.params[p].paramKey==d){r.isExist=!0,eoFreeze.data.params[p].paramInfo=u;break}0==r.isExist&&eoFreeze.data.params.push({paramKey:d,paramInfo:u,checkbox:!0})}}catch(e){o=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw s}}var c=!0,m=!1,f=void 0;try{for(var h,y=e(headers)[Symbol.iterator]();!(c=(h=y.next()).done);c=!0){for(var _=_slicedToArray(h.value,2),v=_[0],b=_[1],p=eoFreeze.data.headers.length-1;p>=0;p--)if(eoFreeze.data.headers[p].headerName.toLowerCase()==v.toLowerCase()){t.isExist=!0,eoFreeze.data.headers[p].headerValue=b.toString();break}0==t.isExist&&eoFreeze.data.headers.push({headerName:v,headerValue:b.toString(),checkbox:!0})}}catch(e){m=!0,f=e}finally{try{!c&&y.return&&y.return()}finally{if(m)throw f}}},handleQuery=function(){var e={fun:{joint:null}};e.fun.joint=function(e){var r="",t=(Object.key,Object.value,Object.entries),a=!0,o=!1,s=void 0;try{for(var i,n=t(e)[Symbol.iterator]();!(a=(i=n.next()).done);a=!0){var l=_slicedToArray(i.value,2),d=l[0],u=l[1];r=""==r?d+"="+u:r+"&"+d+"="+u}}catch(e){o=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw s}}return r},0==$.isEmptyObject(query)&&(url=-1==url.indexOf("?")?url+"?"+e.fun.joint(query):url.split("?")[0]+"?"+e.fun.joint(query))},handleEnv=function handleEnv(){if(!$.isEmptyObject(env)){env.baseUrl&&(url=env.baseUrl+url);var envHeaders=env.headers,headerExist=!1,key=Object.key,value=Object.value,entries=Object.entries,_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _iterator4=entries(envHeaders)[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var _step4$value=_slicedToArray(_step4.value,2),_key9=_step4$value[0],_value9=_step4$value[1];headerExist=!1;for(var i=eoFreeze.data.headers.length-1;i>=0;i--)_key9.toLowerCase()==eoFreeze.data.headers[i].headerName.toLowerCase()&&(headerExist=!0);0==headerExist&&eoFreeze.data.headers.push({headerName:_key9,headerValue:_value9.toString()})}}catch(e){_didIteratorError4=!0,_iteratorError4=e}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}var envParams=env.extraParams,paramExist=!1;if("0"==eoFreeze.data.requestType||"2"==eoFreeze.data.requestType){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _iterator5=entries(envParams)[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var _step5$value=_slicedToArray(_step5.value,2),_key4=_step5$value[0],_value4=_step5$value[1];paramExist=!1;for(var i=eoFreeze.data.params.length-1;i>=0;i--)_key4.toLowerCase()==eoFreeze.data.params[i].paramKey.toLowerCase()&&(paramExist=!0);0==paramExist&&eoFreeze.data.params.push({paramKey:_key4,paramInfo:_value4})}}catch(e){_didIteratorError5=!0,_iteratorError5=e}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}var envGlobal=env.globalParams;if(!$.isEmptyObject(envGlobal)){eoFreeze.data.headers=JSON.stringify(eoFreeze.data.headers);var _key5=Object.key,_value5=Object.value,_entries=Object.entries,_iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _iterator6=_entries(envGlobal)[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var _step6$value=_slicedToArray(_step6.value,2),_key8=_step6$value[0],_value8=_step6$value[1];url=url.replace(eval("/{{"+_key8+"}}/g"),_value8);var regHeaders=new RegExp("{{"+_key8+"}}","gm");eoFreeze.data.headers=eoFreeze.data.headers.replace(regHeaders,_value8)}}catch(e){_didIteratorError6=!0,_iteratorError6=e}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}if(eoFreeze.data.headers=JSON.parse(eoFreeze.data.headers),"1"==eoFreeze.data.requestType){var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _iterator7=_entries(envGlobal)[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){var _step7$value=_slicedToArray(_step7.value,2),_key6=_step7$value[0],_value6=_step7$value[1],regRaw=new RegExp("{{"+_key6+"}}","gm");raw=raw.toString().replace(regRaw,_value6)}}catch(e){_didIteratorError7=!0,_iteratorError7=e}finally{try{!_iteratorNormalCompletion7&&_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}}else{eoFreeze.data.params=JSON.stringify(eoFreeze.data.params);var _iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _iterator8=_entries(envGlobal)[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){var _step8$value=_slicedToArray(_step8.value,2),_key7=_step8$value[0],_value7=_step8$value[1],regParams=new RegExp("{{"+_key7+"}}","gm");eoFreeze.data.params=eoFreeze.data.params.replace(regParams,_value7)}}catch(e){_didIteratorError8=!0,_iteratorError8=e}finally{try{!_iteratorNormalCompletion8&&_iterator8.return&&_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}eoFreeze.data.params=JSON.parse(eoFreeze.data.params)}}}},handleProtocol=function(e){var r="1"==eoFreeze.data.httpHeader?"https://":"http://";return"http://"==e.substring(0,7)||"https://"==e.substring(0,8)||(e=r+e),e};switch(data=JSON.parse(webInfo.caseList[k].caseData),eoFreeze={constant:{},request:{apiUrl:data.URL,responseHeaders:[],dataParams:{},beforeTime:new Date,flagFormDataToJson:!!data.toJson&&data.toJson,processData:!0,ContentType:"application/x-www-form-urlencoded"},response:{error:{},whichXhr:"success"},report:{params:{},requestType:data.requestType,errorText:"",headers:{}},data:{httpHeader:data.httpHeader,requestType:data.requestType,method:data.apiRequestType,params:data.params,raw:data.raw,headers:data.headers,codeError:!1,Url:data.URL,env:webInfo.env,auth:data.auth,beforeScript:data.script?data.script.before:"",afterScript:data.script?data.script.after:""}},env={baseUrl:"",headers:{},extraParams:{},globalParams:{}},url="",params={},headers={},query={},raw="",response=null,eoFreeze.data.method){case"1":eoFreeze.data.method="GET";break;case"2":eoFreeze.data.method="PUT";break;case"3":eoFreeze.data.method="DELETE";break;case"4":eoFreeze.data.method="HEAD";break;case"5":eoFreeze.data.method="OPTIONS";break;case"6":eoFreeze.data.method="PATCH";break;default:eoFreeze.data.method="POST"}if(url=eoFreeze.request.apiUrl,handleArguments(),query=getQuery(url),beforeResult=(0,_injectCode.beforeScript)(eoFreeze.data.beforeScript,url,query,headers,params,raw,env),beforeResult.error?(eoFreeze.data.codeError=!0,eoFreeze.report.errorText=beforeResult.errorReason):(url=beforeResult.url,query=beforeResult.query,headers=beforeResult.headers,params=beforeResult.params,raw=beforeResult.raw,env=beforeResult.env),raw&&(eoFreeze.data.requestType="1"),handleCodeArguments(),handleQuery(),handleEnv(),"2"==eoFreeze.data.requestType)for(i=0;i<eoFreeze.data.params.length;)beforUrl=url,url=url.replace(eval("/{(?!{)"+eoFreeze.data.params[i].paramKey+"}(?!})/g"),eoFreeze.data.params[i].paramInfo),beforUrl!=url?(delete params[eoFreeze.data.params[i].paramKey],eoFreeze.data.params.splice(i,1)):i++;switch(eoFreeze.data.requestType){case"0":if(eoFreeze.request.flagFormDataToJson)formJsonData=(0,_commonUtils.handleFormJson)(eoFreeze.data.params),1==formJsonData.error.status&&(eoFreeze.response.error=formJsonData.error),eoFreeze.request.dataParams=formJsonData.dataParams;else for(i=0;i<eoFreeze.data.params.length;i++){try{"string"!=typeof eoFreeze.data.params[i].paramInfo&&(eoFreeze.data.params[i].paramInfo=JSON.stringify(eoFreeze.data.params[i].paramInfo))}catch(e){}eoFreeze.request.dataParams[eoFreeze.data.params[i].paramKey]=eoFreeze.data.params[i].paramInfo}break;case"1":eoFreeze.request.ContentType="text/plain; charset=UTF-8",eoFreeze.request.dataParams=raw;break;default:if(eoFreeze.request.flagFormDataToJson)formJsonData=(0,_commonUtils.handleFormJson)(eoFreeze.data.params),eoFreeze.request.dataParams=formJsonData.dataParams;else for(i=0;i<eoFreeze.data.params.length;i++)eoFreeze.request.dataParams[eoFreeze.data.params[i].paramKey]=eoFreeze.data.params[i].paramInfo}url=handleProtocol(url),url=encodeURI(decodeURI(url)),eoFreeze.request.flagFormDataToJson&&(eoFreeze.request.ContentType="application/json"),eoData.array.push({headers:eoFreeze.data.headers,apiUrl:url,auth:eoFreeze.data.auth}),Ajax=$.ajax({url:url,beforeSend:function(e){eoFreeze.request.beforeTime=new Date,this.eolinkerTestId=++id,this.matchRule=webInfo.caseList[id].matchRule,this.matchType=webInfo.caseList[id].matchType,this.statuCode=webInfo.caseList[id].statusCode,this.Url=url,this.requestType=eoFreeze.request.requestType,this.dataParams=eoFreeze.request.dataParams,this.method=eoFreeze.data.method,this.errorReason=eoFreeze.report.errorText,this.afterScript=eoFreeze.data.afterScript,this.codeError=eoFreeze.data.codeError;for(var r={},t=eoFreeze.data.headers.length-1;t>=0;t--)r[eoFreeze.data.headers[t].headerName]=eoFreeze.data.headers[t].headerValue;this.headers=r},contentType:eoFreeze.request.ContentType,type:eoFreeze.data.method,async:!0,data:eoFreeze.request.dataParams}).done(function(e,r,t){eoFreeze.response.whichXhr="success",eoFreeze.response.error={status:0,errorText:""}}).fail(function(e,r){eoFreeze.response.whichXhr="error",0==e.status&&(eoFreeze.response.error={status:1,errorText:"target server no answer"})}).always(function(e,r,t){(k=length-1)&&chrome.webRequest.onBeforeSendHeaders.removeListener(handleRequestHeaders);var a,o="",s=this.eolinkerTestId,i=this.matchType,n=this.matchRule,l=this.Url,d=this.method,u=(this.headers,this.dataParams),p=this.statuCode,c=this.requestType,m=this.errorReason,f=this.codeError,h=this.afterScript,y=!1;if(a="success"==eoFreeze.response.whichXhr?t:e,0!=a.status&&1!=eoFreeze.response.error.status){try{response=JSON.parse(a.responseText)}catch(e){response=a.responseText}var _=(0,_injectCode.afterScript)(h,response);_.error?(f=!0,m=_.errorReason):response=_.response;try{"string"!=typeof response&&(response=JSON.stringify(response),JSON.stringify(JSON.parse(a.responseText))==response&&(response=a.responseText))}catch(e){}var v=(new Date,handleTime(eoFreeze.request.beforeTime),a.getAllResponseHeaders()),o=response;if(v=handleResponseHeader(v),v=v.sort(sortArray),2==i)y=!0;else if(a.status==p){if(0==i)o==n?y=!0:(y=!1,m="完全匹配失败，匹配规则为"+n+"，实际返回"+o);else if(1==i)try{var b=new RegExp(n);y=b.test(o)}catch(e){y=!1,m="正则匹配失败，请检查您填写的正则表达式"}}else y=!1,m="状态码不匹配，匹配规则为"+p+"，实际返回"+a.status}else y=!1;y=1!=y||f?"error":"success",2==productType&&oldDeployVersion?amount!=length?backResult.responseList[webInfo.index-1]={responseType:y}:backResult.responseList[s]={responseType:y}:amount!=length?backResult.responseList[webInfo.index-1]={general:{requestUrl:l,requestMethod:d,statusCode:a.status},responseHeaders:v,requestHeaders:allRequestHeaders[s],requestBody:{requestType:c,body:u},response:o,responseType:y,errorReason:m}:backResult.responseList[s]={general:{requestUrl:l,requestMethod:d,statusCode:a.status},responseHeaders:v,requestHeaders:allRequestHeaders[s],requestBody:{requestType:c,body:u},response:o,responseType:y,errorReason:m},chrome.webRequest.onBeforeSendHeaders.removeListener(handleRequestHeaders),batch.postMessage(backResult)}),0==webInfo.index?ajaxs[k]=Ajax:ajaxs[webInfo.index-1]=Ajax}}()}})}})},function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function a(o,s){try{var i=r[o](s),n=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(n).then(function(e){a("next",e)},function(e){a("throw",e)});e(n)}return a("next")})}}var _slicedToArray=function(){function e(e,r){var t=[],a=!0,o=!1,s=void 0;try{for(var i,n=e[Symbol.iterator]();!(a=(i=n.next()).done)&&(t.push(i.value),!r||t.length!==r);a=!0);}catch(e){o=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw s}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_commonUtils=__webpack_require__(0),_injectCode=__webpack_require__(1),_preCode=__webpack_require__(6);chrome.runtime.onConnect.addListener(function(auto){if("autoTest"==auto.name){var initiator=window.location.origin,ajaxs=[];auto.onMessage.addListener(function(caseList){var scar_Test=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee2(){var autoData,env,backResult,errorReason,paramList,i,headerList,additionalParamList,handleProtocol,b64EncodeUnicode,sortArray,jointStr,handleMatchRule,isNum,_matchJson,handleTime,sendRequest,asyncControl,caseLen,amount,productType,version,oldDeployVersion,batchIndex,response,codeTestTime,caseListIndex,cookieObj;return regeneratorRuntime.wrap(function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:if(1!=caseList.stopStatus){_context2.next=4;break}0==caseList.index?(0,_commonUtils.abortAll)(ajaxs):ajaxs[caseList.index-1].abort(),_context2.next=15;break;case 4:if(autoData={preCode:{result:{cookie:{cookie:{example:{cookieStr:"",obj:{}}},defaultCookie:{example:{cookieStr:"",obj:{}}}},report:[]},stopStatus:!0}},env={baseUrl:"",headers:{},extraParams:{},globalParams:{}},backResult={beforeCaseReportList:autoData.preCode.result.report,reportStatus:"finish",time:"0ms",responseList:[{responseType:"success"}],status:"tested"},errorReason="",0==caseList.beforeCase.beforeCaseList){_context2.next=13;break}return _context2.next=11,(0,_preCode.preCode)(caseList.beforeCase).then(function(e){autoData.preCode.result=e,backResult.beforeCaseReportList=autoData.preCode.result.report,env=e.env}).catch(function(e){"stop"==e&&(autoData.preCode.stopStatus=!1)});case 11:_context2.next=14;break;case 13:if(!$.isEmptyObject(caseList.env)){for(caseList.env.frontURIList[0]&&(env.baseUrl=""==env.baseUrl?caseList.env.frontURIList[0].uri:env.baseUrl),paramList={},i=0;i<caseList.env.paramList.length;i++)paramList[caseList.env.paramList[i].paramKey]=caseList.env.paramList[i].paramValue;for(headerList={},i=0;i<caseList.env.headerList.length;i++)headerList[caseList.env.headerList[i].headerName]=caseList.env.headerList[i].headerValue;for(additionalParamList={},i=0;i<caseList.env.additionalParamList.length;i++)additionalParamList[caseList.env.additionalParamList[i].paramKey]=caseList.env.additionalParamList[i].paramValue;env.headers=Object.assign({},headerList,env.headers),env.extraParams=Object.assign({},additionalParamList,env.extraParams),env.globalParams=Object.assign({},paramList,env.globalParams)}case 14:autoData.preCode.stopStatus&&(handleProtocol=function(e,r){var t=e,a="1"==r?"https://":"http://";return"http://"!=e.substring(0,7)&&"https://"!=e.substring(0,8)&&(t=a+e),t},b64EncodeUnicode=function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,r){return String.fromCharCode("0x"+r)}))},sortArray=function(e,r){return e.key>r.key?1:e.key===r.key?0:-1},jointStr=function jointStr(str){var template={output:str,match:[]};return template.match=(str||"").match(/(<)((?!(>)).)*(>)/g),template.match&&template.match.map(function(val,key){try{template.output=template.output.replace(eval("/(\\.|)("+val.replace(/\[/g,"\\[").replace(/\]/g,"\\]")+")(\\.|)/g"),eval(val.substring(1,val.length-1)))}catch(e){}}),template.output},handleMatchRule=function(e,r,t){function a(e){for(var r=0;r<e.childList.length;r++)""!=e.childList[r].paramKey&&(e.childList[r].plugParamKey=e.plugParamKey+"['"+e.childList[r].paramKey+"']",e.childList[r].childList.length>0&&e.childList[r].paramKey&&a(e.childList[r]))}if(0==productType&&version<350)for(var o=e.length-1;o>=0;o--)""!=e[o].paramKey?(e[o].plugParamKey="response["+t+"]['"+e[o].paramKey+"']",e[o].childList.length>0&&e[o].paramKey&&a(e[o])):e.splice(o,1);else for(var o=e.length-1;o>=0;o--)""!=e[o].paramKey?(e[o].plugParamKey="response["+r+"]['"+e[o].paramKey+"']",e[o].childList.length>0&&e[o].paramKey&&a(e[o])):e.splice(o,1);return e},isNum=function(e){return null!=e&&""!=e&&!isNaN(e)},_matchJson=function _matchJson(arrMatchList){function traverse(){isJsonMatch=!0;for(var e=0;e<arrMatch.childList.length;e++)if(0==(isJsonMatch=_matchJson(arrMatch.childList).isMatch))return}for(var isJsonMatch=!0,i=0;i<arrMatchList.length;i++){var arrMatch=arrMatchList[i];if(""!=arrMatch.paramKey){var regular=arrMatch.matchRule,json2=arrMatch.paramInfo||"";try{var json1=eval(arrMatch.plugParamKey)}catch(e){var json1=""}if("#"==json2[0]&&json2.length>1&&(json2="null"==json2.slice(1,5)?null:$.parseJSON(json2.slice(1))),"boolean"==typeof json1&&"string"==typeof json2&&(json1=json1.toString(),json2=json2.toLowerCase()),1==regular)"object"==(void 0===json2?"undefined":_typeof(json2))&&null!=json2&&null!=json1&&(json1=JSON.stringify(json1),json2=JSON.stringify(json2)),json1==json2?traverse():(isJsonMatch=!1,errorReason="字段"+arrMatch.paramKey+"结果不匹配，匹配规则为"+arrMatch.paramKey+"等于"+JSON.stringify(json2)+"，实际返回"+JSON.stringify(json1));else if(2==regular)"object"==(void 0===json2?"undefined":_typeof(json2))&&null!=json2&&null!=json1&&(json1=JSON.stringify(json1),json2=JSON.stringify(json2)),json1!=json2?traverse():(isJsonMatch=!1,errorReason="字段"+arrMatch.paramKey+"结果不匹配，匹配规则为"+arrMatch.paramKey+"不等于"+JSON.stringify(json2)+"，实际返回"+JSON.stringify(json1));else if(3==regular)isNum(json1)&&isNum(json2)?json1>json2?traverse():isJsonMatch=!1:isNum(json1)||isNum(json2)?isJsonMatch=!1:JSON.stringify(json1)>JSON.stringify(json2)?traverse():isJsonMatch=!1,0==isJsonMatch&&(errorReason="字段"+arrMatch.paramKey+"结果不匹配，匹配规则为"+arrMatch.paramKey+"大于"+json2+"，实际返回"+JSON.stringify(json1));else if(4==regular)isNum(json1)&&isNum(json2)?json1<json2?traverse():isJsonMatch=!1:isNum(json1)||isNum(json2)?isJsonMatch=!1:JSON.stringify(json1)<JSON.stringify(json2)?traverse():isJsonMatch=!1,0==isJsonMatch&&(errorReason="字段"+arrMatch.paramKey+"结果不匹配，匹配规则为"+arrMatch.paramKey+"，小于"+json2+"实际返回"+JSON.stringify(json1));else if(5==regular)try{var patt=new RegExp(json2);patt.test(json1)?traverse():(isJsonMatch=!1,errorReason="字段"+arrMatch.paramKey+"结果不匹配，匹配规则为"+arrMatch.paramKey+"正则匹配"+JSON.stringify(json2)+"，实际返回"+JSON.stringify(json1))}catch(e){console.log(e),isJsonMatch=!1,errorReason="字段"+arrMatch.paramKey+"正则匹配失败，请检查您填写的正则表达式"}else traverse()}if(0==isJsonMatch)return{isMatch:isJsonMatch,errorReason:errorReason}}return{isMatch:isJsonMatch,errorReason:""}},handleTime=function(e){var r,t,a,o,s,i;return r=e.getFullYear()+"-",t=(e.getMonth()+1<10?"0"+(e.getMonth()+1):e.getMonth()+1)+"-",a=e.getDate()+" ",o=e.getHours()+":",s=e.getMinutes()+":",i=e.getSeconds(),e=r+t+a+o+s+i},sendRequest=function sendRequest(k){return new Promise(function(resolve,reject){function handleArguments(){for(var e=0;e<eoFreeze.data.headers.length;)eoFreeze.data.headers[e].headerName&&0!=eoFreeze.data.headers[e].checkbox?(headers[eoFreeze.data.headers[e].headerName]=jointStr(eoFreeze.data.headers[e].headerValue),e++):eoFreeze.data.headers.splice(e,1);if("1"==eoFreeze.data.requestType)raw=eoFreeze.data.raw;else for(var e=0;e<eoFreeze.data.params.length;)eoFreeze.data.params[e].paramKey&&0!=eoFreeze.data.params[e].checkbox?(params[eoFreeze.data.params[e].paramKey]=jointStr(eoFreeze.data.params[e].paramInfo)||"",e++):eoFreeze.data.params.splice(e,1)}function getQuery(e){var r={};if(e.indexOf("?")>-1){var t=e.substring(e.indexOf("?")+1);t=t.split("&"),t.forEach(function(e,t){var a=e.split("=");r[a[0]]=a[1]})}return r}function handleCodeArguments(){var e=(Object.key,Object.value,Object.entries),r={isExist:!1},t={isExist:!1},a=!0,o=!1,s=void 0;try{for(var i,n=e(params)[Symbol.iterator]();!(a=(i=n.next()).done);a=!0){var l=_slicedToArray(i.value,2),d=l[0],u=l[1];r.isExist=!1;for(var p=eoFreeze.data.params.length-1;p>=0;p--)if(eoFreeze.data.params[p].paramKey==d){r.isExist=!0,eoFreeze.data.params[p].paramInfo=u;break}0==r.isExist&&eoFreeze.data.params.push({paramKey:d,paramInfo:u,checkbox:!0})}}catch(e){o=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw s}}var c=!0,m=!1,f=void 0;try{for(var h,y=e(headers)[Symbol.iterator]();!(c=(h=y.next()).done);c=!0){for(var _=_slicedToArray(h.value,2),v=_[0],b=_[1],p=eoFreeze.data.headers.length-1;p>=0;p--)if(eoFreeze.data.headers[p].headerName.toLowerCase()==v.toLowerCase()){t.isExist=!0,eoFreeze.data.headers[p].headerValue=b.toString();break}0==t.isExist&&eoFreeze.data.headers.push({headerName:v,headerValue:b.toString(),checkbox:!0})}}catch(e){m=!0,f=e}finally{try{!c&&y.return&&y.return()}finally{if(m)throw f}}}function handleQuery(){var e={fun:{joint:null}};e.fun.joint=function(e){var r="",t=(Object.key,Object.value,Object.entries),a=!0,o=!1,s=void 0;try{for(var i,n=t(e)[Symbol.iterator]();!(a=(i=n.next()).done);a=!0){var l=_slicedToArray(i.value,2),d=l[0],u=l[1];r=""==r?d+"="+u:r+"&"+d+"="+u}}catch(e){o=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw s}}return r},0==$.isEmptyObject(query)&&(url=-1==url.indexOf("?")?url+"?"+e.fun.joint(query):url.split("?")[0]+"?"+e.fun.joint(query))}function handleEnv(){if(!$.isEmptyObject(env)){env.baseUrl&&(url=env.baseUrl+url);var envHeaders=env.headers,headerExist=!1,key=Object.key,value=Object.value,entries=Object.entries,_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _iterator4=entries(envHeaders)[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var _step4$value=_slicedToArray(_step4.value,2),_key9=_step4$value[0],_value9=_step4$value[1];headerExist=!1;for(var i=eoFreeze.data.headers.length-1;i>=0;i--)_key9.toLowerCase()==eoFreeze.data.headers[i].headerName.toLowerCase()&&(headerExist=!0);0==headerExist&&eoFreeze.data.headers.push({headerName:_key9,headerValue:_value9.toString()})}}catch(e){_didIteratorError4=!0,_iteratorError4=e}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}var envParams=env.extraParams,paramExist=!1;if("0"==eoFreeze.data.requestType||"2"==eoFreeze.data.requestType){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _iterator5=entries(envParams)[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var _step5$value=_slicedToArray(_step5.value,2),_key4=_step5$value[0],_value4=_step5$value[1];paramExist=!1;for(var i=eoFreeze.data.params.length-1;i>=0;i--)_key4.toLowerCase()==eoFreeze.data.params[i].paramKey.toLowerCase()&&(paramExist=!0);0==paramExist&&eoFreeze.data.params.push({paramKey:_key4,paramInfo:_value4})}}catch(e){_didIteratorError5=!0,_iteratorError5=e}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}var envGlobal=env.globalParams;if(!$.isEmptyObject(envGlobal)){eoFreeze.data.headers=JSON.stringify(eoFreeze.data.headers);var _key5=Object.key,_value5=Object.value,_entries=Object.entries,_iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _iterator6=_entries(envGlobal)[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var _step6$value=_slicedToArray(_step6.value,2),_key8=_step6$value[0],_value8=_step6$value[1];url=url.replace(eval("/{{"+_key8+"}}/g"),_value8);var regHeaders=new RegExp("{{"+_key8+"}}","gm");eoFreeze.data.headers=eoFreeze.data.headers.replace(regHeaders,_value8)}}catch(e){_didIteratorError6=!0,_iteratorError6=e}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}if(eoFreeze.data.headers=JSON.parse(eoFreeze.data.headers),"1"==eoFreeze.data.requestType){var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _iterator7=_entries(envGlobal)[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){var _step7$value=_slicedToArray(_step7.value,2),_key6=_step7$value[0],_value6=_step7$value[1],regRaw=new RegExp("{{"+_key6+"}}","gm");raw=raw.toString().replace(regRaw,_value6)}}catch(e){_didIteratorError7=!0,_iteratorError7=e}finally{try{!_iteratorNormalCompletion7&&_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}}else{eoFreeze.data.params=JSON.stringify(eoFreeze.data.params);var _iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _iterator8=_entries(envGlobal)[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){var _step8$value=_slicedToArray(_step8.value,2),_key7=_step8$value[0],_value7=_step8$value[1],regParams=new RegExp("{{"+_key7+"}}","gm");eoFreeze.data.params=eoFreeze.data.params.replace(regParams,_value7)}}catch(e){_didIteratorError8=!0,_iteratorError8=e}finally{try{!_iteratorNormalCompletion8&&_iterator8.return&&_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}eoFreeze.data.params=JSON.parse(eoFreeze.data.params)}}}}function getCookieObj(e,r){for(var t=e.split(";"),a=0;a<t.length;a++){var o=t[a].split("=");o[1]?r.obj[o[0].replace(/\s+|"+/g,"")]=o[1]:r.cookieStr=r.cookieStr+t[a]}return r}function handleRequestUrl(e){var r=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,t=r.exec(e)||"",a=["url","scheme","slash","authority","port","path","query","hash"],o=[];return a.forEach(function(e,r){o[e]=t[r]}),o}function handleRequestHeaders(details){if(!details.initiator)if(navigator.userAgent.indexOf("Firefox")>-1)details.initiator=details.originUrl.replace("/_generated_background_page.html","");else for(var j=details.requestHeaders.length-1;j>=0;j--)if("origin"==details.requestHeaders[j].name.toLowerCase()){details.initiator=details.requestHeaders[j].value;break}var host1=handleRequestUrl(details.url).authority,url1=handleRequestUrl(url);if(url1="http"==url1.scheme&&"80"==url1.port||"https"==url1.scheme&&"443"==url1.port?url.replace(eval("/:"+url1.port+"/"),""):url,(details.initiator==initiator||-1==details.tabId)&&(details.url.indexOf(url1)>-1||Redirection.status&&Redirection.location.indexOf(host1)>-1)){var headerCookieFlag=!1,cookieName="cookie";host=handleRequestUrl(details.url).authority,host in cookieObj.cookie||(cookieObj.cookie[host]={cookieStr:"",obj:{}});for(var j=details.requestHeaders.length-1;j>=0;j--)"cookie"==details.requestHeaders[j].name.toLowerCase()&&(cookieName=details.requestHeaders[j].name,details.requestHeaders.splice(j,1));if(eoFreeze.data.headers.forEach(function(e){for(var r=!1,t=details.requestHeaders.length-1;t>=0;t--)details.requestHeaders[t].name.toLowerCase()==e.headerName.toLowerCase()&&(r=!0,details.requestHeaders[t].name=e.headerName,details.requestHeaders[t].value=e.headerValue);0==r&&details.requestHeaders.push({name:e.headerName,value:e.headerValue}),"cookie"==e.headerName.toLowerCase()&&(headerCookieFlag=!0,cookieObj.cookie[host]=getCookieObj(e.headerValue,cookieObj.cookie[host]))}),0==headerCookieFlag){var cookieValue="",keys=Object.keys,values=Object.values,entries=Object.entries;host in cookieObj.defaultCookie||(cookieObj.defaultCookie[host]={cookieStr:"",obj:{}});var _iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _iterator9=entries(cookieObj.cookie[host].obj)[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0){var _step9$value=_slicedToArray(_step9.value,2),key=_step9$value[0],value=_step9$value[1];cookieObj.defaultCookie[host].obj[key]=value}}catch(e){_didIteratorError9=!0,_iteratorError9=e}finally{try{!_iteratorNormalCompletion9&&_iterator9.return&&_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9}}var _iteratorNormalCompletion10=!0,_didIteratorError10=!1,_iteratorError10=void 0;try{for(var _iterator10=entries(cookieObj.defaultCookie[host].obj)[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=!0){var _step10$value=_slicedToArray(_step10.value,2),key=_step10$value[0],value=_step10$value[1];cookieValue=cookieValue+key+"="+value+";"}}catch(e){_didIteratorError10=!0,_iteratorError10=e}finally{try{!_iteratorNormalCompletion10&&_iterator10.return&&_iterator10.return()}finally{if(_didIteratorError10)throw _iteratorError10}}cookieValue+=cookieObj.cookie[host].cookieStr,""!=cookieValue&&details.requestHeaders.push({name:cookieName,value:cookieValue})}if(eoFreeze.data.auth&&1==eoFreeze.data.auth.status){var str=eoFreeze.data.auth.basicAuth.username+":"+eoFreeze.data.auth.basicAuth.password,headerName="Authorization",headerValue="Basic "+b64EncodeUnicode(str);details.requestHeaders.push({name:headerName,value:headerValue})}for(var j=details.requestHeaders.length-1;j>=0;j--)eoFreeze.request.requestHeaders[details.requestHeaders[j].name]=details.requestHeaders[j].value}return{requestHeaders:details.requestHeaders}}function getResponseHeaders(details){details.initiator||(navigator.userAgent.indexOf("Firefox")>-1?details.initiator=details.originUrl.replace("/_generated_background_page.html",""):details.initiator="");var host1=handleRequestUrl(details.url).authority,url1=handleRequestUrl(url);if(url1="http"==url1.scheme&&"80"==url1.port||"https"==url1.scheme&&"443"==url1.port?url.replace(eval("/:"+url1.port+"/"),""):url,(details.initiator==initiator||-1==details.tabId)&&details.url.indexOf(url1)>-1){302==details.statusCode&&(Redirection.status=!0),details.responseHeaders.forEach(function(e){"location"==e.name.toLowerCase()&&(Redirection.location=e.value),e.name in eoFreeze.request.responseHeaders?eoFreeze.request.responseHeaders[e.name]=eoFreeze.request.responseHeaders[e.name]+e.value:eoFreeze.request.responseHeaders[e.name]=e.value});var key=Object.key,value=Object.value,entries=Object.entries;host in cookieObj.defaultCookie||(cookieObj.defaultCookie[host]={cookieStr:"",obj:{}});var _iteratorNormalCompletion11=!0,_didIteratorError11=!1,_iteratorError11=void 0;try{for(var _iterator11=entries(eoFreeze.request.responseHeaders)[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=!0){var _step11$value=_slicedToArray(_step11.value,2),_key10=_step11$value[0],_value10=_step11$value[1];"set-cookie"==_key10.toLowerCase()&&(cookieObj.defaultCookie[host]=getCookieObj(_value10,cookieObj.defaultCookie[host]))}}catch(e){_didIteratorError11=!0,_iteratorError11=e}finally{try{!_iteratorNormalCompletion11&&_iterator11.return&&_iterator11.return()}finally{if(_didIteratorError11)throw _iteratorError11}}}}var caseData=JSON.parse(caseList.caseData[k].caseData),error={},eoFreeze={constant:{},request:{apiUrl:caseData.URL,requestHeaders:{},responseHeaders:{},dataParams:{},beforeTime:new Date,flagFormDataToJson:!!caseData.toJson&&caseData.toJson,processData:!0,ContentType:"application/x-www-form-urlencoded;charset=utf-8"},response:{error:{},whichXhr:"success"},report:{params:{},requestType:caseData.requestType,errorText:"",headers:{}},data:{keepGoing:caseData.keepGoing||!1,codeError:!1,httpHeader:caseData.httpHeader,requestType:caseData.requestType,method:caseData.apiRequestType,params:caseData.params,raw:caseData.raw,headers:caseData.headers,Url:caseData.URL,env:caseList.env,auth:caseData.auth,beforeScript:caseData.script?caseData.script.before:"",afterScript:caseData.script?caseData.script.after:""}},url="",params={},headers={},query={},raw="",Redirection={status:!1,location:""},host="",responseHeaders={};switch(errorReason="",eoFreeze.data.method){case"1":eoFreeze.data.method="GET";break;case"2":eoFreeze.data.method="PUT";break;case"3":eoFreeze.data.method="DELETE";break;case"4":eoFreeze.data.method="HEAD";break;case"5":eoFreeze.data.method="OPTIONS";break;case"6":eoFreeze.data.method="PATCH";break;default:eoFreeze.data.method="POST"}url=eoFreeze.request.apiUrl,handleArguments(),query=getQuery(url);var beforeResult=(0,_injectCode.beforeScript)(eoFreeze.data.beforeScript,url,query,headers,params,raw,env);beforeResult.error?(eoFreeze.data.codeError=!0,errorReason=beforeResult.errorReason,reject("reject")):(url=beforeResult.url,query=beforeResult.query,headers=beforeResult.headers,params=beforeResult.params,raw=beforeResult.raw,env=beforeResult.env),raw&&(eoFreeze.data.requestType="1"),handleCodeArguments();for(var i=0;i<eoFreeze.data.headers.length;i++)eoFreeze.data.headers[i].headerValue=jointStr(eoFreeze.data.headers[i].headerValue);if("1"==eoFreeze.data.requestType);else for(var i=0;i<eoFreeze.data.params.length;i++)eoFreeze.data.params[i].paramInfo=jointStr(eoFreeze.data.params[i].paramInfo)||"";if(handleQuery(),handleEnv(),"2"==eoFreeze.data.requestType)for(var i=0;i<eoFreeze.data.params.length;){var beforUrl=url;url=url.replace(eval("/{(?!{)"+eoFreeze.data.params[i].paramKey+"}(?!})/g"),eoFreeze.data.params[i].paramInfo),beforUrl!=url?(delete params[eoFreeze.data.params[i].paramKey],eoFreeze.data.params.splice(i,1)):i++}switch(eoFreeze.data.requestType){case"0":if(eoFreeze.request.flagFormDataToJson){var formJsonData=(0,_commonUtils.handleFormJson)(eoFreeze.data.params);eoFreeze.request.dataParams=formJsonData.dataParams,eoFreeze.data.requestType="1"}else for(var i=0;i<eoFreeze.data.params.length;i++)eoFreeze.request.dataParams[eoFreeze.data.params[i].paramKey]=eoFreeze.data.params[i].paramInfo||"";break;case"1":var throwReplacer=function throwReplacer(match,pi,offset,str){var result="";try{result=match.replace("<"+pi+">",eval(pi))}catch(e){result="<"+pi+">"}return result};eoFreeze.request.ContentType="text/plain; charset=UTF-8",eoFreeze.request.dataParams=raw,eoFreeze.request.dataParams&&(eoFreeze.request.dataParams=eoFreeze.request.dataParams.replace(/\<([^<>]+)\>/g,throwReplacer));break;default:if(eoFreeze.request.flagFormDataToJson){var formJsonData=(0,_commonUtils.handleFormJson)(eoFreeze.data.params);eoFreeze.request.dataParams=formJsonData.dataParams,eoFreeze.data.requestType="1"}else for(var i=0;i<eoFreeze.data.params.length;i++)eoFreeze.request.dataParams[eoFreeze.data.params[i].paramKey]=eoFreeze.data.params[i].paramInfo}eoFreeze.request.flagFormDataToJson&&(eoFreeze.request.ContentType="application/json"),url=handleProtocol(url,eoFreeze.request.httpHeader),url=encodeURI(decodeURI(url)),window.parent.chrome.webRequest.onBeforeSendHeaders.addListener(handleRequestHeaders,{urls:["http://*/*","https://*/*"],types:["xmlhttprequest"]},["blocking","requestHeaders"]),window.parent.chrome.webRequest.onHeadersReceived.addListener(getResponseHeaders,{urls:["<all_urls>"]},["responseHeaders","blocking"]);var Ajax=$.ajax({url:url,beforeSend:function(e){eoFreeze.request.beforeTime=new Date},contentType:eoFreeze.request.ContentType,type:eoFreeze.data.method,async:!0,data:eoFreeze.request.dataParams}).done(function(e,r,t){eoFreeze.response.whichXhr="success"}).fail(function(e,r){console.log(r),eoFreeze.response.whichXhr="error",0==e.status&&(error={status:1,errorText:"target server no answer"}),"abort"==r&&reject("ignore")}).always(function(e,r,t){chrome.webRequest.onBeforeSendHeaders.removeListener(handleRequestHeaders),chrome.webRequest.onHeadersReceived.removeListener(getResponseHeaders);var a,o="",s=caseList.caseData[k].matchType,i=caseList.caseData[k].matchRule,n=eoFreeze.data.keepGoing,l=!1,d="",u=caseList.caseData[k].statusCode;a="success"==eoFreeze.response.whichXhr?t:e;var p=new Date,c=(handleTime(eoFreeze.request.beforeTime),a.responseText),o=a.responseText;try{o=JSON.parse(c)}catch(e){}var m=(0,_injectCode.afterScript)(eoFreeze.data.afterScript,o);m.error?(eoFreeze.data.codeError=!0,errorReason=m.errorReason,reject("reject")):o=m.response;try{"string"!=typeof o&&(c=JSON.stringify(o),JSON.stringify(JSON.parse(a.responseText))==c&&(c=a.responseText))}catch(e){console.log(e)}if(0==productType&&version<350?response[k]=o:response[caseList.caseData[k].connID]=o,p-=eoFreeze.request.beforeTime,0!=a.status&&0==eoFreeze.data.codeError)if(3==s)l=!0;else if(a.status==u){if(0==s)c==i?l=!0:(l=!1,errorReason="完全匹配失败，匹配规则为"+i+"，实际返回"+c);else if(1==s)try{var f=new RegExp(i);l=f.test(c)}catch(e){l=!1,errorReason="正则匹配失败，请检查您填写的正则表达式"}else if(2==s)if(0!=i.length&&i[0].paramKey&&null!=i){i=handleMatchRule(i,caseList.caseData[k].connID,k);var h=_matchJson(i);errorReason=h.errorReason,l=h.isMatch}else l=!0}else l=!1,errorReason="状态码不匹配，匹配规则为"+u+"，实际返回"+a.status;else l=!1;d=l?"success":"error";var y=!1;(eoFreeze.data.codeError||0==a.status||0==l&&!n)&&(y=!0),"success"==d&&2==productType&&oldDeployVersion?0!=caseListIndex?backResult.responseList[caseListIndex-1]={general:{},responseHeaders:"",requestHeaders:"",requestBody:{requestType:"",body:""},response:"",responseType:d}:backResult.responseList[k]={general:{},responseHeaders:"",requestHeaders:"",requestBody:{requestType:"",body:""},response:"",responseType:d}:0!=caseListIndex?backResult.responseList[caseListIndex-1]={apiIndex:caseListIndex-1,isStopTest:y,keepGoing:n,general:{time:p+"ms",requestUrl:url,requestMethod:eoFreeze.data.method,statusCode:a.status,name:caseList.caseData[k].apiName,match:{rule:i,type:s,statusCode:u}},responseHeaders:eoFreeze.request.responseHeaders,requestHeaders:eoFreeze.request.requestHeaders,requestBody:{requestType:eoFreeze.data.requestType,body:eoFreeze.request.dataParams},response:c,errorReason:errorReason,responseType:d}:backResult.responseList[k]={apiIndex:k,isStopTest:y,keepGoing:n,general:{time:p+"ms",requestUrl:url,requestMethod:eoFreeze.data.method,statusCode:a.status,name:caseList.caseData[k].apiName,match:{rule:i,type:s,statusCode:u}},responseHeaders:eoFreeze.request.responseHeaders,requestHeaders:eoFreeze.request.requestHeaders,requestBody:{requestType:eoFreeze.data.requestType,body:eoFreeze.request.dataParams},response:c,errorReason:errorReason,responseType:d},(y||k==amount-1)&&(codeTestTime.finishTime=new Date,codeTestTime.finishTime=codeTestTime.finishTime-codeTestTime.startTime,backResult.time=codeTestTime.finishTime+"ms"),void 0==batchIndex&&auto.postMessage(backResult),(0==l||y)&&(backResult.reportStatus="error"),y?reject("reject"):resolve("success")});void 0!=batchIndex?ajaxs.push(Ajax):0==caseListIndex?ajaxs[k]=Ajax:ajaxs[caseListIndex-1]=Ajax})},asyncControl=function(){var e=_asyncToGenerator(regeneratorRuntime.mark(function e(){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=0;case 1:if(!(r<caseLen)){e.next=7;break}return e.next=4,sendRequest(r);case 4:r++,e.next=1;break;case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),caseLen=caseList.caseData.length,amount=caseList.amount,productType=caseList.productType,version=caseList.productVersion,oldDeployVersion=caseList.oldDeployVersion,batchIndex=caseList.batchIndex,response={},codeTestTime={startTime:null,finishTime:null},caseListIndex=caseList.index,cookieObj=autoData.preCode.result.cookie,backResult.batchIndex=batchIndex,0==caseListIndex&&"undefined"==batchIndex&&(ajaxs=[]),backResult.responseList=new Array(amount),codeTestTime.startTime=new Date,asyncControl().then(function(){auto.postMessage(backResult)}).catch(function(e){console.log(e),auto.postMessage(backResult)}));case 15:case"end":return _context2.stop()}},_callee2,this)}));return function(){return _ref.apply(this,arguments)}}();scar_Test()})}})},function(module,exports,__webpack_require__){"use strict";function _asyncToGenerator(e){return function(){var r=e.apply(this,arguments);return new Promise(function(e,t){function a(o,s){try{var i=r[o](s),n=i.value}catch(e){return void t(e)}if(!i.done)return Promise.resolve(n).then(function(e){a("next",e)},function(e){a("throw",e)});e(n)}return a("next")})}}var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_slicedToArray=function(){function e(e,r){var t=[],a=!0,o=!1,s=void 0;try{for(var i,n=e[Symbol.iterator]();!(a=(i=n.next()).done)&&(t.push(i.value),!r||t.length!==r);a=!0);}catch(e){o=!0,s=e}finally{try{!a&&n.return&&n.return()}finally{if(o)throw s}}return t}return function(r,t){if(Array.isArray(r))return r;if(Symbol.iterator in Object(r))return e(r,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_commonUtils=__webpack_require__(0),_preCode=__webpack_require__(6);_commonUtils.File.txt||_commonUtils.File.getAllFile(),chrome.runtime.onConnect.addListener(function(autoCode){if("autoCodeTest"==autoCode.name){var initiator=window.location.origin,ajaxs=[];autoCode.onMessage.addListener(function(caseCodeList){var scar_Test=function(){var _ref=_asyncToGenerator(regeneratorRuntime.mark(function _callee(){var autoCodeData,env,reportList,paramList,i,headerList,additionalParamList,handleEnv,sortArray,throwReplacer,caseCode,batchIndex,codeTestTime,executeIndex,contentType,processData,cookieObj,requestType,eo,stringFun,content;return regeneratorRuntime.wrap(function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(1!=caseCodeList.stopStatus){_context.next=5;break}return(0,_commonUtils.abortAll)(ajaxs),_context.abrupt("return");case 5:if(autoCodeData={preCode:{result:{cookie:{cookie:{example:{cookieStr:"",obj:{}}},defaultCookie:{example:{cookieStr:"",obj:{}}}},report:[]},stopStatus:!0}},env={baseUrl:"",headers:{},extraParams:{},globalParams:{}},reportList={status:"finish",time:"0ms",beforeCaseReportList:[],responseList:[],successApi:0,totalApi:0},0==caseCodeList.beforeCase.beforeCaseList.length){_context.next=13;break}return _context.next=11,(0,_preCode.preCode)(caseCodeList.beforeCase).then(function(e){autoCodeData.preCode.result=e,reportList.beforeCaseReportList=autoCodeData.preCode.result.report,env=e.env}).catch(function(e){"stop"==e&&(autoCodeData.preCode.stopStatus=!1)});case 11:_context.next=14;break;case 13:if(!$.isEmptyObject(caseCodeList.env)){for(caseCodeList.env.frontURIList[0]&&(env.baseUrl=""==env.baseUrl?caseCodeList.env.frontURIList[0].uri:env.baseUrl),paramList={},i=0;i<caseCodeList.env.paramList.length;i++)paramList[caseCodeList.env.paramList[i].paramKey]=caseCodeList.env.paramList[i].paramValue;for(headerList={},i=0;i<caseCodeList.env.headerList.length;i++)headerList[caseCodeList.env.headerList[i].headerName]=caseCodeList.env.headerList[i].headerValue;for(additionalParamList={},i=0;i<caseCodeList.env.additionalParamList.length;i++)additionalParamList[caseCodeList.env.additionalParamList[i].paramKey]=caseCodeList.env.additionalParamList[i].paramValue;env.headers=Object.assign({},headerList,env.headers),env.extraParams=Object.assign({},additionalParamList,env.extraParams),env.globalParams=Object.assign({},paramList,env.globalParams)}case 14:if(autoCodeData.preCode.stopStatus){handleEnv=function handleEnv(apiUrl,headers,params){if(!$.isEmptyObject(env)){env.baseUrl&&(apiUrl=env.baseUrl+apiUrl);var headerList=env.headers,key=Object.key,value=Object.value,entries=Object.entries,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _iterator=entries(headerList)[Symbol.iterator](),_step;!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _step$value=_slicedToArray(_step.value,2),_key8=_step$value[0],_value7=_step$value[1],headerExist=!1,_iteratorNormalCompletion8=!0,_didIteratorError8=!1,_iteratorError8=void 0;try{for(var _iterator8=entries(headers)[Symbol.iterator](),_step8;!(_iteratorNormalCompletion8=(_step8=_iterator8.next()).done);_iteratorNormalCompletion8=!0){var _step8$value=_slicedToArray(_step8.value,2),key1=_step8$value[0],value1=_step8$value[1];key1.toLowerCase()==_key8.toLowerCase()&&(headerExist=!0)}}catch(e){_didIteratorError8=!0,_iteratorError8=e}finally{try{!_iteratorNormalCompletion8&&_iterator8.return&&_iterator8.return()}finally{if(_didIteratorError8)throw _iteratorError8}}0==headerExist&&(headers[_key8]=_value7)}}catch(e){_didIteratorError=!0,_iteratorError=e}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}if(params.constructor===Object){var paramList=env.extraParams,_key=Object.key,_value=Object.value,_entries=Object.entries,_iteratorNormalCompletion2=!0,_didIteratorError2=!1,_iteratorError2=void 0;try{for(var _iterator2=_entries(paramList)[Symbol.iterator](),_step2;!(_iteratorNormalCompletion2=(_step2=_iterator2.next()).done);_iteratorNormalCompletion2=!0){var _step2$value=_slicedToArray(_step2.value,2),_key2=_step2$value[0],_value2=_step2$value[1];_key2 in params||(params[_key2]=_value2)}}catch(e){_didIteratorError2=!0,_iteratorError2=e}finally{try{!_iteratorNormalCompletion2&&_iterator2.return&&_iterator2.return()}finally{if(_didIteratorError2)throw _iteratorError2}}}var globalVal=env.globalParams;if(!$.isEmptyObject(globalVal)){headers=JSON.stringify(headers);var _key3=Object.key,_value3=Object.value,_entries2=Object.entries,_iteratorNormalCompletion3=!0,_didIteratorError3=!1,_iteratorError3=void 0;try{for(var _iterator3=_entries2(globalVal)[Symbol.iterator](),_step3;!(_iteratorNormalCompletion3=(_step3=_iterator3.next()).done);_iteratorNormalCompletion3=!0){var _step3$value=_slicedToArray(_step3.value,2),_key7=_step3$value[0],_value6=_step3$value[1];apiUrl=apiUrl.replace(eval("/{{"+_key7+"}}/g"),_value6);var regHeaders=new RegExp("{{"+_key7+"}}","gm");headers=headers.replace(regHeaders,_value6)}}catch(e){_didIteratorError3=!0,_iteratorError3=e}finally{try{!_iteratorNormalCompletion3&&_iterator3.return&&_iterator3.return()}finally{if(_didIteratorError3)throw _iteratorError3}}headers=JSON.parse(headers);var midheaders=JSON.stringify(headers).toLowerCase();if(midheaders=JSON.parse(midheaders),midheaders["content-type"]&&(midheaders["content-type"].toLowerCase().indexOf("json")>-1||midheaders["content-type"].toLowerCase().indexOf("text")>-1?(requestType=1,contentType=midheaders["content-type"]):midheaders["content-type"].toLowerCase().indexOf("multipart/form-data")>-1&&(requestType=2,contentType=!1,processData=!1)),0==contentType&&"object"==(void 0===params?"undefined":_typeof(params))){var keys=Object.keys,values=Object.values,_entries3=Object.entries,_iteratorNormalCompletion4=!0,_didIteratorError4=!1,_iteratorError4=void 0;try{for(var _iterator4=_entries3(params)[Symbol.iterator](),_step4;!(_iteratorNormalCompletion4=(_step4=_iterator4.next()).done);_iteratorNormalCompletion4=!0){var _step4$value=_slicedToArray(_step4.value,2),_key4=_step4$value[0],_value4=_step4$value[1];if("[object Blob]"==Object.prototype.toString.call(_value4)){var _iteratorNormalCompletion5=!0,_didIteratorError5=!1,_iteratorError5=void 0;try{for(var _iterator5=_entries3(globalVal)[Symbol.iterator](),_step5;!(_iteratorNormalCompletion5=(_step5=_iterator5.next()).done);_iteratorNormalCompletion5=!0){var _step5$value=_slicedToArray(_step5.value,2),key1=_step5$value[0],value1=_step5$value[1],regparam=new RegExp("{{"+key1+"}}","gm"),_key5=_key4.replace(regparam,value1);_key4!=_key4.replace(regparam,value1)&&(params[_key5]=_value4,delete params[_key4],_key4=_key5)}}catch(e){_didIteratorError5=!0,_iteratorError5=e}finally{try{!_iteratorNormalCompletion5&&_iterator5.return&&_iterator5.return()}finally{if(_didIteratorError5)throw _iteratorError5}}}else{var _iteratorNormalCompletion6=!0,_didIteratorError6=!1,_iteratorError6=void 0;try{for(var _iterator6=_entries3(globalVal)[Symbol.iterator](),_step6;!(_iteratorNormalCompletion6=(_step6=_iterator6.next()).done);_iteratorNormalCompletion6=!0){var _step6$value=_slicedToArray(_step6.value,2),key1=_step6$value[0],value1=_step6$value[1],regparam=new RegExp("{{"+key1+"}}","gm"),key2=_key4.replace(regparam,value1);_value4=_value4.replace(regparam,value1),params[key2]=_value4,_key4!=key2&&(delete params[_key4],_key4=key2)}}catch(e){_didIteratorError6=!0,_iteratorError6=e}finally{try{!_iteratorNormalCompletion6&&_iterator6.return&&_iterator6.return()}finally{if(_didIteratorError6)throw _iteratorError6}}}}}catch(e){_didIteratorError4=!0,_iteratorError4=e}finally{try{!_iteratorNormalCompletion4&&_iterator4.return&&_iterator4.return()}finally{if(_didIteratorError4)throw _iteratorError4}}}else{params=JSON.stringify(params);var _iteratorNormalCompletion7=!0,_didIteratorError7=!1,_iteratorError7=void 0;try{for(var _iterator7=_entries2(globalVal)[Symbol.iterator](),_step7;!(_iteratorNormalCompletion7=(_step7=_iterator7.next()).done);_iteratorNormalCompletion7=!0){var _step7$value=_slicedToArray(_step7.value,2),_key6=_step7$value[0],_value5=_step7$value[1],regparam=new RegExp("{{"+_key6+"}}","gm");params=params.replace(regparam,_value5)}}catch(e){_didIteratorError7=!0,_iteratorError7=e}finally{try{!_iteratorNormalCompletion7&&_iterator7.return&&_iterator7.return()}finally{if(_didIteratorError7)throw _iteratorError7}}params=JSON.parse(params)}}}return{headers:headers,params:params,apiUrl:apiUrl}},sortArray=function(e,r){return e.key>r.key?1:e.key===r.key?0:-1},throwReplacer=function(e,r){var t=1;return caseCode.slice(0,r).replace(/\n/g,function(e,r){t++}),e+t+","},caseCode=caseCodeList.caseCode,batchIndex=caseCodeList.batchIndex,codeTestTime={startTime:null,finishTime:null},executeIndex=-1,contentType="application/x-www-form-urlencoded;charset=utf-8",processData=!0,cookieObj=autoCodeData.preCode.result.cookie,requestType=0,eo={execute:null,stop:null,info:null,sha1:null,md5:null,sha256:null,img:null,file:null},eo.execute=function(apiInfo){return new Promise(function(resolve,reject){if(reportList.totalApi++,executeIndex++,contentType="application/x-www-form-urlencoded;charset=utf-8",apiInfo&&apiInfo.url){var getCookieObj=function(e,r){for(var t=e.split(";"),a=0;a<t.length;a++){var o=t[a].split("=");o[1]?r.obj[o[0].replace(/\s+|"+/g,"")]=o[1]:r.cookieStr=r.cookieStr+t[a]}return r},handleRequestUrl=function(e){var r=/^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/,t=r.exec(e),a=["url","scheme","slash","authority","port","path","query","hash"],o=[];return a.forEach(function(e,r){o[e]=t[r]}),o},handleRequestHeaders=function handleRequestHeaders(details){if(!details.initiator)if(navigator.userAgent.indexOf("Firefox")>-1)details.initiator=details.originUrl.replace("/_generated_background_page.html","");else for(var j=details.requestHeaders.length-1;j>=0;j--)if("origin"==details.requestHeaders[j].name.toLowerCase()){details.initiator=details.requestHeaders[j].value;break}var host1=handleRequestUrl(details.url).authority,apiUrl1=handleRequestUrl(apiUrl);if(apiUrl1="http"==apiUrl1.scheme&&"80"==apiUrl1.port||"https"==apiUrl1.scheme&&"443"==apiUrl1.port?apiUrl.replace(eval("/:"+apiUrl1.port+"/"),""):apiUrl,(details.initiator==initiator||-1==details.tabId)&&(details.url.indexOf(apiUrl1)>-1||Redirection.status&&Redirection.location.indexOf(host1)>-1)){var headerCookieFlag=!1,cookieName="cookie";host=handleRequestUrl(details.url).authority,host in cookieObj.cookie||(cookieObj.cookie[host]={cookieStr:"",obj:{}});for(var _keys=Object.keys,_values=Object.values,_entries4=Object.entries,j=details.requestHeaders.length-1;j>=0;j--)"cookie"==details.requestHeaders[j].name.toLowerCase()&&(cookieName=details.requestHeaders[j].name,details.requestHeaders.splice(j,1));var _iteratorNormalCompletion10=!0,_didIteratorError10=!1,_iteratorError10=void 0;try{for(var _iterator10=_entries4(headers)[Symbol.iterator](),_step10;!(_iteratorNormalCompletion10=(_step10=_iterator10.next()).done);_iteratorNormalCompletion10=!0){var _step10$value=_slicedToArray(_step10.value,2),key=_step10$value[0],value=_step10$value[1],headerFlag=!1;value=value.toString();for(var j=details.requestHeaders.length-1;j>=0;j--)details.requestHeaders[j].name.toLowerCase()==key.toLowerCase()&&(headerFlag=!0,"content-type"==key.toLowerCase()&&value.indexOf("multipart/form-data")>-1||(details.requestHeaders[j].name=key,details.requestHeaders[j].value=value));0==headerFlag&&details.requestHeaders.push({name:key,value:value}),"cookie"==key.toLowerCase()&&(headerCookieFlag=!0,cookieObj.cookie[host]=getCookieObj(value,cookieObj.cookie[host]))}}catch(e){_didIteratorError10=!0,_iteratorError10=e}finally{try{!_iteratorNormalCompletion10&&_iterator10.return&&_iterator10.return()}finally{if(_didIteratorError10)throw _iteratorError10}}if(0==headerCookieFlag){var cookieValue="",_keys2=Object.keys,_values2=Object.values,_entries5=Object.entries;host in cookieObj.defaultCookie||(cookieObj.defaultCookie[host]={cookieStr:"",obj:{}});var _iteratorNormalCompletion11=!0,_didIteratorError11=!1,_iteratorError11=void 0;try{for(var _iterator11=_entries5(cookieObj.cookie[host].obj)[Symbol.iterator](),_step11;!(_iteratorNormalCompletion11=(_step11=_iterator11.next()).done);_iteratorNormalCompletion11=!0){var _step11$value=_slicedToArray(_step11.value,2),key=_step11$value[0],value=_step11$value[1];cookieObj.defaultCookie[host].obj[key]=value}}catch(e){_didIteratorError11=!0,_iteratorError11=e}finally{try{!_iteratorNormalCompletion11&&_iterator11.return&&_iterator11.return()}finally{if(_didIteratorError11)throw _iteratorError11}}var _iteratorNormalCompletion12=!0,_didIteratorError12=!1,_iteratorError12=void 0;try{for(var _iterator12=_entries5(cookieObj.defaultCookie[host].obj)[Symbol.iterator](),_step12;!(_iteratorNormalCompletion12=(_step12=_iterator12.next()).done);_iteratorNormalCompletion12=!0){var _step12$value=_slicedToArray(_step12.value,2),key=_step12$value[0],value=_step12$value[1];cookieValue=cookieValue+key+"="+value+";"}}catch(e){_didIteratorError12=!0,_iteratorError12=e}finally{try{!_iteratorNormalCompletion12&&_iterator12.return&&_iterator12.return()}finally{if(_didIteratorError12)throw _iteratorError12}}cookieValue+=cookieObj.cookie[host].cookieStr,""!=cookieValue&&details.requestHeaders.push({name:cookieName,value:cookieValue})}for(var j=details.requestHeaders.length-1;j>=0;j--)requestHeaders[details.requestHeaders[j].name]=details.requestHeaders[j].value}return{requestHeaders:details.requestHeaders}},getResponseHeaders=function getResponseHeaders(details){details.initiator||(navigator.userAgent.indexOf("Firefox")>-1?details.initiator=details.originUrl.replace("/_generated_background_page.html",""):details.initiator="");var host1=handleRequestUrl(details.url).authority,apiUrl1=handleRequestUrl(apiUrl);if(apiUrl1="http"==apiUrl1.scheme&&"80"==apiUrl1.port||"https"==apiUrl1.scheme&&"443"==apiUrl1.port?apiUrl.replace(eval("/:"+apiUrl1.port+"/"),""):apiUrl,(details.initiator==initiator||-1==details.tabId)&&details.url.indexOf(apiUrl1)>-1){302==details.statusCode&&(Redirection.status=!0),details.responseHeaders.forEach(function(e){"location"==e.name.toLowerCase()&&(Redirection.location=e.value),e.name in responseHeaders?responseHeaders[e.name]=responseHeaders[e.name]+e.value:responseHeaders[e.name]=e.value});var key=Object.key,value=Object.value,_entries6=Object.entries;host in cookieObj.defaultCookie||(cookieObj.defaultCookie[host]={cookieStr:"",obj:{}});var _iteratorNormalCompletion13=!0,_didIteratorError13=!1,_iteratorError13=void 0;try{for(var _iterator13=_entries6(responseHeaders)[Symbol.iterator](),_step13;!(_iteratorNormalCompletion13=(_step13=_iterator13.next()).done);_iteratorNormalCompletion13=!0){var _step13$value=_slicedToArray(_step13.value,2),_key9=_step13$value[0],_value8=_step13$value[1];"set-cookie"==_key9.toLowerCase()&&(cookieObj.defaultCookie[host]=getCookieObj(_value8,cookieObj.defaultCookie[host]))}}catch(e){_didIteratorError13=!0,_iteratorError13=e}finally{try{!_iteratorNormalCompletion13&&_iterator13.return&&_iterator13.return()}finally{if(_didIteratorError13)throw _iteratorError13}}}},apiUrl=apiInfo.url,name=apiInfo.name||"",params=apiInfo.params||[],headers=apiInfo.headers||[],method=apiInfo.method||"GET",timelimit=apiInfo.timelimit,timelimitContinue=apiInfo.timelimitContinue,dataParams=null,host="",responseHeaders={};void 0==timelimitContinue&&(timelimitContinue=!0);var beforeTime=null,responseList={},requestHeaders={},whichXhr="success";method=method.toUpperCase();var Redirection={status:!1,location:""};null==timelimit&&(timelimit=1e4);var midVal=handleEnv(apiUrl,headers,params);params=midVal.params,headers=midVal.headers,apiUrl=midVal.apiUrl;var midheaders=JSON.stringify(headers).toLowerCase();if(midheaders=JSON.parse(midheaders),midheaders["content-type"]&&(midheaders["content-type"].toLowerCase().indexOf("json")>-1||midheaders["content-type"].toLowerCase().indexOf("text")>-1?(requestType=1,contentType=midheaders["content-type"]):midheaders["content-type"].toLowerCase().indexOf("multipart/form-data")>-1&&(requestType=2,contentType=!1,processData=!1)),params.constructor===String&&1!=requestType)throw reportList.status="codeError",reportList.errorReport={content:"第"+(executeIndex+1)+"个接口头部content-type值与params不匹配"},"ignore";if(0==contentType&&"object"==(void 0===params?"undefined":_typeof(params))&&2==requestType){var keys=Object.keys,values=Object.values,entries=Object.entries;dataParams=new FormData;var _iteratorNormalCompletion9=!0,_didIteratorError9=!1,_iteratorError9=void 0;try{for(var _iterator9=entries(params)[Symbol.iterator](),_step9;!(_iteratorNormalCompletion9=(_step9=_iterator9.next()).done);_iteratorNormalCompletion9=!0){var _step9$value=_slicedToArray(_step9.value,2),key=_step9$value[0],value=_step9$value[1];"[object Blob]"==Object.prototype.toString.call(value)?(dataParams.append(key,value,value.fileName||key),params[key]="[object Blob]"):dataParams.append(key,value)}}catch(e){_didIteratorError9=!0,_iteratorError9=e}finally{try{!_iteratorNormalCompletion9&&_iterator9.return&&_iterator9.return()}finally{if(_didIteratorError9)throw _iteratorError9}}}else dataParams=params;"http://"!=apiUrl.substring(0,7)&&"https://"!=apiUrl.substring(0,8)&&(apiUrl="http://"+apiUrl),apiUrl=encodeURI(apiUrl),window.parent.chrome.webRequest.onBeforeSendHeaders.addListener(handleRequestHeaders,{urls:["http://*/*","https://*/*"],types:["xmlhttprequest"]},["blocking","requestHeaders"]),window.parent.chrome.webRequest.onHeadersReceived.addListener(getResponseHeaders,{urls:["<all_urls>"]},["responseHeaders","blocking"]);var timeout=null;apiUrl=encodeURI(decodeURI(apiUrl));var Ajax=$.ajax({url:apiUrl,beforeSend:function(e){function r(){reportList.responseList[executeIndex]={apiIndex:executeIndex,general:{time:timelimit+"ms",requestUrl:apiUrl,status:"timeout",requestMethod:method,timeLimit:timelimit,name:name},responseHeaders:null,requestHeaders:requestHeaders,requestBody:{requestType:requestType,body:params||null},response:null,reportList:[{type:"timeout",content:"请求超时"}]},timelimitContinue||(reject("ignore"),reportList.status="timeout"),Ajax.abort()}beforeTime=new Date,timeout=setTimeout(r,Number(timelimit)||0)},async:!0,method:method,data:dataParams,processData:processData,contentType:contentType}).done(function(e,r,t){clearTimeout(timeout),whichXhr="success"}).fail(function(e,r,t){clearTimeout(timeout),whichXhr="error","abort"==r&&reportList.responseList[executeIndex]&&!timelimitContinue&&reject("ignore")}).always(function(e,r,t){chrome.webRequest.onBeforeSendHeaders.removeListener(handleRequestHeaders),chrome.webRequest.onHeadersReceived.removeListener(getResponseHeaders),contentType="application/x-www-form-urlencoded;charset=utf-8",processData=!0;var a;a="success"==whichXhr?t:e;var o=new Date,o=o-beforeTime;if(reportList.responseList[executeIndex]);else{var s=a.responseText;try{s=JSON.parse(s)}catch(e){}0!=a.status?reportList.responseList[executeIndex]={apiIndex:executeIndex,general:{time:o+"ms",requestUrl:apiUrl,status:"finish",requestMethod:method,timeLimit:timelimit,statusCode:a.status,name:name},requestBody:{requestType:requestType,body:params},response:a.responseText,responseHeaders:responseHeaders,requestHeaders:requestHeaders,reportList:[]}:reportList.responseList[executeIndex]={apiIndex:executeIndex,general:{time:o+"ms",requestUrl:apiUrl,status:"error",requestMethod:method,timeLimit:timelimit,statusCode:a.status,name:name},requestBody:{requestType:requestType,body:params},response:null,responseHeaders:null,requestHeaders:requestHeaders,reportList:[{type:"error",content:"target server no answer"}]}}resolve({time:o+"ms",code:a.status,response:s,header:responseHeaders})});ajaxs.push(Ajax)}else{var index=executeIndex+1;reject("第"+index+"个eo.execute()传入信息有误")}})},eo.stop=function(e,r){throw reportList.status="interrupt",reportList.responseList[executeIndex].general.status="interrupt",reportList.responseList[executeIndex].reportList.push({type:"interrupt",content:r,lineNum:e}),"ignore"},eo.info=function(e,r,t){if(reportList.responseList[executeIndex]&&(reportList.responseList[executeIndex].reportList.push({type:"info",content:r,lineNum:e}),t))throw"ignore"},eo.img=function(e){if("jpg"==e.toLowerCase()||"png"==e.toLowerCase()||"gif"==e.toLowerCase())return _commonUtils.File[e.toLowerCase()];throw reportList.status="codeError",reportList.errorReport={content:"eo.img传值错误"},"ignore"},eo.file=function(e){if("txt"==e.toLowerCase()||"none"==e.toLowerCase()||"doc"==e.toLowerCase()||"docx"==e.toLowerCase()||"pdf"==e.toLowerCase())return _commonUtils.File[e.toLowerCase()];throw reportList.status="codeError",reportList.errorReport={content:"eo.file传值错误"},"ignore"},eo.MD5=eo.Md5=eo.md5=function(e,r){try{return(0,_commonUtils.MD5)(e.toString(),r)}catch(e){throw reportList.status="codeError",reportList.errorReport={content:"eo.md5传值错误"},"ignore"}},eo.SHA1=eo.Sha1=eo.sha1=function(e){if(e){return sha1(e.toString())}throw reportList.status="codeError",reportList.errorReport={content:"eo.sha1传值错误"},"ignore"},eo.SHA256=eo.Sha256=eo.sha256=function(e){if(e){return(0,_commonUtils.SHA256)(e.toString())}throw reportList.status="codeError",reportList.errorReport={content:"eo.sha256传值错误"},"ignore"},Object.freeze(eo),caseCode=caseCode.replace(/eo\.info\(/g,throwReplacer),caseCode=caseCode.replace(/eo\.stop\(/g,throwReplacer),caseCode=caseCode.replace(/eo\.execute\(/g,function(e,r){return"await "+e}),stringFun=function(){sendRequest().then(function(e){codeTestTime.finishTime=new Date,codeTestTime.finishTime=codeTestTime.finishTime-codeTestTime.startTime,reportList.time=codeTestTime.finishTime+"ms",reportList.responseList.forEach(function(e){"finish"==e.general.status&&reportList.successApi++}),reportList.batchIndex=batchIndex,autoCode.postMessage(reportList)}).catch(function(e){if(console.error("【async】",e),"ignore"!=e){if(r="",navigator.userAgent.indexOf("Firefox")>-1)var r=e.toString();else r=e.stack;reportList.status="codeError",e.toString().indexOf("传入信息有误")>-1&&(r=e+"，请检查"),r.indexOf("Illegal invocation")>-1&&(r="非法调用，如：文件请求没有添加头部multipart/form-data，传参类型错误等"),reportList.errorReport={content:r}}codeTestTime.finishTime=new Date,codeTestTime.finishTime=codeTestTime.finishTime-codeTestTime.startTime,reportList.time=codeTestTime.finishTime+"ms",reportList.responseList.forEach(function(e){"finish"==e.general.status&&reportList.successApi++}),reportList.batchIndex=batchIndex,autoCode.postMessage(reportList)})},caseCode="async function sendRequest() {\n"+caseCode+"\n};\n("+stringFun.toString()+")();\n";try{codeTestTime.startTime=new Date,eval(caseCode)}catch(e){"ignore"!=e&&(content="",content=navigator.userAgent.indexOf("Firefox")>-1?e.toString():e.stack,reportList.status="codeError",content.indexOf("await is only valid in async function")>-1&&(content="请不要在函数内执行eo.execute()函数"),reportList.errorReport={content:content}),codeTestTime.finishTime=new Date,codeTestTime.finishTime=codeTestTime.finishTime-codeTestTime.startTime,reportList.time=codeTestTime.finishTime+"ms",reportList.batchIndex=batchIndex,autoCode.postMessage(reportList),console.log("【caseCode】",e)}}case 15:case"end":return _context.stop()}},_callee,this)}));return function(){return _ref.apply(this,arguments)}}();scar_Test()})}})}]);